\documentclass{article}
\usepackage{graphicx} % Required for inserting images
\usepackage[utf8]{inputenc}
\usepackage{amsmath,amsfonts,amssymb,amsthm}
\usepackage{enumerate,bbm}
\usepackage{leftindex}
\usepackage{tikz,tikz-cd,graphicx,color,mathrsfs,color,hyperref,boldline}
\usepackage{caption,float}
\usepackage{stmaryrd}
\usepackage[a4paper,margin=1in,footskip=0.25in]{geometry}
\usepackage{marvosym}
\usepackage{listings}
\usepackage{xcolor}

\usepackage{tabularx,capt-of}

\usepackage{blindtext}
%Image-related packages
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage[export]{adjustbox}
\usepackage{lipsum}

%hyperref setup
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=cyan,
    pdftitle={Overleaf Example},
    pdfpagemode=FullScreen,
    }

%New colors defined below
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

%Code listing style named "mystyle"
\lstdefinestyle{mystyle}{
  backgroundcolor=\color{backcolour}, commentstyle=\color{codegreen},
  keywordstyle=\color{magenta},
  numberstyle=\tiny\color{codegray},
  stringstyle=\color{codepurple},
  basicstyle=\ttfamily\footnotesize,
  breakatwhitespace=false,         
  breaklines=true,                 
  captionpos=b,                    
  keepspaces=true,                 
  numbers=left,                    
  numbersep=5pt,                  
  showspaces=false,                
  showstringspaces=false,
  showtabs=false,                  
  tabsize=2
}

%"mystyle" code listing set
\lstset{style=mystyle}

\theoremstyle{definition}
\newtheorem{defn}{Definition}[section]
\newtheorem{example}[defn]{Example}
\theoremstyle{remark}
\newtheorem{rem}{Remark}
\newtheorem{remS}[section]{defn}
\theoremstyle{plain}
\newtheorem{lem}[defn]{Lemma}
\newtheorem{thm}[defn]{Theorem}
\newtheorem{prop}[defn]{Proposition}
\newtheorem{fact}[defn]{Fact}
\newtheorem{crly}[defn]{Corollary}
\newtheorem{conj}[defn]{Conjecture}

%\newtheorem*{programming*}{Programming Task}

%\newtheorem{innercustomgeneric}{\customgenericname}
%\providecommand{\customgenericname}{}
%\newcommand{\newcustomtheorem}[2]{%
%  \newenvironment{#1}[1]
%  {%
%   \renewcommand\customgenericname{#2}%
%   \renewcommand\theinnercustomgeneric{##1}%
%   \innercustomgeneric
%  }
%  {\endinnercustomgeneric}
%}

%\newcustomtheorem{question}{Question}
%\newcustomtheorem{programming}{Programming Task}

\newcommand{\NN}{\mathbb{N}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\CC}{\mathbb{C}}
\newcommand{\PP}{\mathbb{P}}
\newcommand{\FF}{\mathbb{F}}
\newcommand{\Hom}{\operatorname{Hom}}
\newcommand{\im}{\operatorname{im}}
\newcommand{\id}{\operatorname{id}}
\newcommand{\Ind}{\operatorname{Ind}}
\newcommand{\Res}{\operatorname{Res}}
\newcommand{\tr}{\operatorname{Tr}}
\newcommand{\disc}{\operatorname{disc}}
\newcommand{\e}{\varepsilon}
\newcommand{\calD}{\mathcal{D}}

\newcommand{\sol}{\textit{Solution: }}

\title{Number Fields}
\author{Kevin Song (illustrations by Owen)}
\date{January 2025}

\begin{document}
\maketitle
\section{???}
(: (\textit{Owen's signature})
%\subsection*{What?}
%Field Extension: \(L\vert K\)




\begin{defn}
    A number field is a subfield $K\subseteq \CC$ s.t. $[K:\QQ]<\infty$.
\end{defn}
Let $\alpha$ be an algebraic number. There exists $f_\alpha\in\QQ[X]$ of minimal positive deg s.t. $f_\alpha(\alpha)=0$. 
\begin{itemize}
    \item (monic) min poly: leading coeff 1.
    \item min poly in $\ZZ[X]$: clearing denominators.
\end{itemize}
$[\QQ(\alpha):\QQ]=\deg f_\alpha$. These are all the examples by primitive element theorem.
\begin{example}
    Quadratic fields, cyclotomic fields. 
\end{example}
%\subsection*{Why?}
%We don't care... (so why are we here?) idk

\[);\models\tag{Owen's Signature}\]

\begin{defn}
    An algebraic number $\alpha$ is an algebraic integer if $f_\alpha\in\ZZ[X]$ (i.e., its monic minimal polynomial has integer coefficient)
\end{defn}
\begin{rem}
    If $\alpha$ is a root of a monic poly $f\in\ZZ[X]$, then $\alpha$ is an algebraic integer.
\end{rem}
\begin{example}
    Let $K=\QQ(\sqrt m)$
    If $m\not\equiv 3\pmod 4$, then $\mathcal O_K=\ZZ[\sqrt m]$. If $m\equiv 1\pmod 4$, then $\mathcal O_K=\ZZ[(1+\sqrt m)/2]$.

    For cyclotomic field $K=\QQ(\theta_n)$, $n\ge 3$, $\mathcal O_K=\ZZ[\theta_m]$. (We will prove this for $n$ prime later.)
\end{example}
\begin{thm}
    The set of algebraic integers $\mathcal{O}$ is a ring.
\end{thm}
Notation: We write $\mathcal{O}_K=K\cap\mathcal O$ for $K$ number field, and we call $\mathcal O_K$ the ring of integers in $K$.
\begin{proof}
    GRM ES4.s
\end{proof}
\begin{table}[H]
    \centering
    \begin{tabular}{c|c|c}
         0&$\longleftarrow^\bullet$ & $\overline\longrightarrow$ \\
         \hline
         $\leftrightarrow$&O &\\
         \hline
        \(\tilde{\mathcal{O}}\) & &\(\overset{\circ}{\chi}\)
    \end{tabular}
    \caption{Noughts and Arrows}
    \label{tab:my_label}
\end{table}

\begin{prop}
    Let $\alpha\in\CC$ be an algebraic number. TFAE,
    \begin{enumerate}
        \item[(i)] $\alpha$ is an algebraic integer;
        \item[(ii)] $\ZZ[\alpha]$ is f.g. as a $\ZZ$-module
        \item[(iii)] $\exists$ a f.g. $\ZZ$-module $M$ that is invariant under multiplication by $\alpha$.
    \end{enumerate}
\end{prop}
\begin{proof}
    (1)$\Rightarrow$(2)$\Rightarrow$(3) is clear. Need to prove (3)$\Rightarrow$(1). Let $M=\ZZ\beta_1\oplus...\oplus \ZZ\beta_k$ be a module satisfying (3). Left multiplication by $\alpha$ is $\ZZ$-linear. Let $A$ be the matrix, then take the char poly of $A$.
\end{proof}
\[\{-:\tag{Owen's Signature}\]
\section{Additive Structure of $\mathcal{O}_K$}
Let $K$ be a number field of deg $d$. If $\mathcal O_K=\ZZ\alpha_1\oplus...\oplus\ZZ\alpha_d$ for some $\alpha_i\in \mathcal O_K$, then we say that $\{\alpha_i\}$ is an integral basis. Always have an integral basis (assume $\mathcal O_K$ is f.g.): structure theorem and linear independence $\Rightarrow$ $\mathcal O_K$ is has rank $r\le d$; $\mathcal O_K$ contains $d$ linearly independent elements in $K$ ($1,\alpha,\alpha^2,...,\alpha^{d-1}$, where $K=\QQ(\alpha)$).

Find $\mathcal O_K$:
\begin{enumerate}
    \item Find $d$ L.I. elements $\alpha_i^{(1)}$ of $\mathcal O_K$ and let $M_1=\bigoplus\ZZ\alpha_i^{(1)}$
    \item If $M_1=\mathcal O_K$, then done. Otherwise, can find $\beta\in\mathcal O_K\setminus M_1$. and consider $M_2=M_1+\ZZ\beta$ and express in normal form $M_2=\bigoplus\ZZ\alpha_i^{(2)}$.
    \item Iterate this process.
\end{enumerate}
Need to prove that this process terminates. 

Recall trace and norm from Galois theory. (I have recalled. Pls hurry up.) Recall basic properties of trace and norm. (I have recalled. Pls hurry up.) Abbreviate $N_{K/\QQ}=N_K,\tr_{K/\QQ}=\tr_K$. Recall more properties of trace and norm. (I have recalled. Pls hurry up.)

%Would you rather a faster lectured course on number fields? (Groj) Y/N? *************************************************

\begin{defn}
    Let $\alpha_1,...,\alpha_d\in K$, where $K$ is a number field of deg $d$. The discriminant is defined as $\disc(\alpha_1,...,\alpha_d)=\det(\sigma_i(\alpha_j))^2$, where $\sigma_i\in\Hom(K,\CC)$.
\end{defn}
\begin{example}
    $\disc(1,\alpha,\alpha^2,...,\alpha^{d-1})=(-1)^{\frac{n(n-1)}{2}}N(f'(\alpha))$.
\end{example}
\begin{lem}
    For $\alpha_1,...,\alpha_d\in K$, then
    $\disc(\alpha_1,...,\alpha_d)=\det(\tr_K(\alpha_i\alpha_j))$. If $\alpha_1,...,\alpha_d\in\mathcal O_K$, then $\disc(\alpha_1,...,\alpha_d)\in\ZZ$.
\end{lem}
\begin{proof}
    Compute,
    \begin{align*}
        [\tr(\alpha_i\alpha_k)]_{ik}=[\sigma_j(\alpha_i)]_{ij}[\sigma_{j}(\alpha_k)]_{jk}
    \end{align*}
    Take det.
\end{proof}
\begin{lem}
    $\disc(\alpha_1,...,\alpha_d)=0$ iff $\alpha_1,...,\alpha_d$ are linearly dependent over $\QQ$.
\end{lem}
\begin{proof}
    If linearly dependent, then $[\tr(\alpha_i\alpha_j)]$ is singular. 
    
    Suppose $\alpha_1,...,\alpha_d$ are linearly indpe over $\QQ$. If $\tr(\alpha_i\alpha_j)$ is singular, find $a_1,...,a_d\in\QQ$ not all zero s.t. $a_1\tr(\alpha_1\alpha_j)+\ldots+a_d\tr(\alpha_1\alpha_j)=0$, i.e., $\tr((a_1\alpha_1+\ldots+a_d\alpha_d)\alpha_j)=0$ for all $j$. Let $\gamma=a_1\alpha_1+\ldots+a_d\alpha_d$. This is non-zero by independence. So $\tr(\gamma\beta)\neq 0$ for all $\beta$ (linear combination of $\alpha_i$). In particular, take $\beta=\gamma^{-1}$. Contradiction.
\end{proof}
\begin{crly}
    $\alpha_1,...,\alpha_d$ are l.i. over $\QQ$ iff the set of vectors $\{(\sigma_i(\alpha_j))_{1\le i\le d}:j\in\{1,...,d\}\}$ is l.i. over $\CC$.
\end{crly}
Recall we have $d$ embeddings in to $\CC$. Let $r$ be the number of real embeddings. Suppose $\sigma_1,...,\sigma_r$ are real embeddings. Let $s=\frac{d-r}{2}$. and write $\tau_1,...,\tau_s$, $\bar\tau_1,...,\bar\tau_s$ for the remaining embeddings. Consider $\Sigma:K\to\RR^d$ defined by
\begin{align*}
    \Sigma(\alpha)=\begin{pmatrix}
        \sigma_1(\alpha)\\ \vdots\\ \sigma_r(\alpha)\\ \Re(\tau_1(\alpha))\\ \Im(\tau_1(\alpha))\\\vdots\\ \Im(\tau_n(\alpha_n))
    \end{pmatrix}
\end{align*}
$\Sigma$ is a hom of additive groups.
\begin{prop}
    Let $\alpha_1,..,\alpha_d\in K$. Then $\disc(\alpha_1,...,\alpha_d)=(-4)^s\det(\Sigma(\alpha_1),\cdots,\Sigma(\alpha_d))^2$.
    In particular, $\alpha_1,..,\alpha_d$ are l.i. over $\QQ$ iff $\Sigma(\alpha_1),...,\Sigma(\alpha_n)$ are l.i. over $\RR$
\end{prop}
\begin{proof}
    Write $\disc(\alpha_1,...,\alpha_d)=\det(\sigma_i(\alpha_j))^2$. Row operations.
\end{proof}

\begin{defn}
Let $\Lambda=\ZZ v_1\oplus\cdots\oplus\ZZ v_d$, where $v_1,...,v_d$ are l.i. over $\RR$. This is called a lattice. A fundamental domain for $\Lambda$ is a bounded Borel set of $\RR^d$ that contains exactly one element from each coset $x+\Lambda$ for $x\in\RR^d$.
\end{defn}
The volume of the fundamental parallelepiped $\Sigma(\alpha_1),...,\Sigma(\alpha_d)$ is $|\disc(\alpha_1,...,\alpha_d)|^{1/2}$
\begin{lem}
    For a lattice $\Lambda\subseteq\RR^d$, all fundamental domains have the same volume.
\end{lem}
\begin{proof}
    Let $F_1, F_2$ be  fundamental domains. Then $F_1=\bigsqcup_{v\in\Lambda}F_1\cap(v+F_2)$ and similarly for $F_2$. Note that $(F_1\cap (F_2+v))-v=(F_1-v)\cap F_2$. Compute
    \[\operatorname{vol}(F_1)=\sum_{v\in\Lambda}\operatorname{vol}(F_1\cap (v+F_2))=\sum_{v\in\Lambda}\operatorname{vol}((F_1-v)\cap F_2)=\operatorname{vol}(F_2)\]
\end{proof}
\begin{defn}
    The co-volume of a lattice $\operatorname{covol}(\Lambda)$ is the volume of any fundamental domain.
\end{defn}
\begin{prop}
    Let $K$ be a number field.
    Let $\alpha_1,...,\alpha_d\in K$, $\beta_1,...,\beta_d\in K$ be $\QQ$-indep tuples. Let $A\in\operatorname{GL}_d(\QQ)$ be s.t. $(\beta_i)_i=A(\alpha_i)_i$. Then $\disc(\beta_1,...,\beta_d)=(\det A)^2\disc(\alpha_1,...,\alpha_d)$. If $\beta_1,...,\beta_d\in \ZZ\alpha_1+\cdots+\ZZ\alpha_d$, then $|\disc(\beta_1,...,\beta_d)|\ge|\disc(\alpha_1,...,\alpha_d)|$. Finally, $\disc$ depends only on the module generated by the tuple, i.e., if two tuples generate the same module then they have the same disc.
\end{prop}
\[)=\tag{Owen's Signature}\]
\begin{defn}
    For a $\ZZ$-module $M\subseteq K$ (where $K$ is a number field), we define $\disc(M)$ as the discriminant of any generating tuple.

    For a number field $K$, define $\disc K=\disc\mathcal O_K$.
\end{defn}
\begin{proof}
    Have $[\sigma_j{\beta_i}]_{ij}=A[\sigma_j\alpha_i]_{ij}$. Take det, get the first formula.

    If $\beta_1,...,\beta_d\in\ZZ\alpha_1+\cdots\ZZ\alpha_d$, then $\ZZ$ has integer entries, so $(\det A)^2\geqslant 1$. Get the inequality. If they generate the same module, then by a symmetric argument, can show that $\le$ also holds.
\end{proof}
\begin{prop}
    Let $M_1\subseteq M_2$ be two $\ZZ$-modules of rank $d$ in a number field $K$. Then 
    \[|M_2/M_1|^2=\dfrac{\disc M_1}{\disc M_2}\]
\end{prop}
\begin{thm}[Smith Normal Form]
    Let $M_1\subseteq M_2$ be two $\ZZ$-mod. Then $\exists$ free generators $\alpha_1,...,\alpha_d$ of $M_2$ s.t. $a_1|a_2|\cdots|a_d\in\ZZ_{\ge 0}$ s.t. $a_1\alpha_1,...,a_d\alpha_d$ are free generators for $M_1$.
\end{thm}
\begin{thm}
    A tuple $\alpha_1,...,\alpha_d\in\mathcal O_K$ is an integral basis [$\mathcal O_K=\ZZ\alpha_1\oplus\cdots\oplus\ZZ\alpha_d$] iff $|\disc(\alpha_1,...,\alpha_d)|$ is minimal among all tuples with with non-zero discriminant.
\end{thm}
\begin{proof}
    $(\Leftarrow)$: Suppose $\alpha_1,...,\alpha_d\in\mathcal O_K$ has the least positive $|\disc|$. Let $\beta\in\mathcal O_K$. Have
    \[1\le |(M+\ZZ\beta)/M|^2=\dfrac{\disc(M)}{\disc(M+\ZZ\beta)}\le1\]
    so $M=M+\ZZ\beta$.

    $(\Rightarrow)$: If not minimal then can find $\beta_1,...,\beta_d$ with smaller disc., so $\ZZ\beta_1+\cdots+\ZZ\beta_d\nsubseteq\ZZ\alpha_1+\cdots+\ZZ\alpha_d$.
\end{proof}
\begin{prop}
    Let $\alpha_1,...,\alpha_d\in\mathcal O_K$ be $\QQ$-linearly independent. Then all elements of $\mathcal O_K$ can be written in the form
    \[\dfrac{a_1\alpha_1+\cdots+a_d\alpha_d}{q}\]
    where $a_1,...,a_d\in\ZZ$ and $q\in\ZZ$ with $q^2\mid \frac{\disc(\alpha_1,...,\alpha_d)}{\disc(\mathcal O_K)}$.
\end{prop}
\begin{proof}
    Let $\beta\in\mathcal O_K$ and $q=|(M+\ZZ\beta)/M|$, where $M=\ZZ\alpha_1+\cdots+\ZZ\alpha_d$.
    \[q^2\Bigg|\frac{\disc(\alpha_1,...,\alpha_d)}{\disc(M+\ZZ\beta)}\Bigg|\frac{\disc(\alpha_1,...,\alpha_d)}{\disc(\mathcal O_K)}\]
    Have $q\beta\in M$ (consider the order).
\end{proof}
\section{Unique Factorization of Ideals}
\[(\%\tag{Owen's Signature}\]
Recall definition of an ideal from GRM (I recall please hurry up).

Notation: $\langle\alpha\rangle$ denotes the principal ideal generated by $\alpha$.

Recall the defn of the product of two ideals. (I have recalled please hurry up). (This turns ideals into a semigroup and $\alpha\mapsto\langle\alpha\rangle$ is a homomorphism). Recall how to add two ideals.

\begin{thm}
    Let $K$ be a number field. Then every non-zero ideal of $\mathcal O_K$ is a product of non-zero prime ideals, and this factorization is unique up to reordering.
\end{thm}
We assume that rings are commutative and unital.

Recall definition of integral domain (I have recalled please hurry up)
Recall definition of field (I have recalled please hurry up) [A non-zero field where every non-zero element has a multiplicative inverse is a field.]
Recall definition of field of fractions (I have recalled please hurry up!)
Recall definition of a prime ideal (I have recalled please hurry UP!)
Recall definition of a maximal ideal (I have RECALLED.........)

\begin{lem}
    Let $K$ be a number field. $\mathcal O_K$ is Noetherian.
\end{lem}
\begin{proof}
    Every ideal is a $\ZZ$-submodule of $\mathcal O_K$, which is f.g. as a $\ZZ$-submodule, so it's f.g. as a $\mathcal O_K$-submodule (ideal).
\end{proof}
Note that this implies that every collection of ideals has a maximal element.
\[):zzzzzzzz\tag{Owen's Signature}\]
\begin{lem}
    A non-zero ideal $I\trianglelefteq\mathcal O_K$ prime iff it's maximal.
\end{lem}
\begin{proof}
    $\Rightarrow:$ Suffices to prove that $\mathcal O_K/I$ is a finite integral domain for $I$ prime. Can reduce to principal prime ideals $\langle\beta\rangle\subseteq I$ since $\mathcal O_K/I$ is a quotient of $\mathcal O_K/\langle\beta\rangle$. Let $\alpha_1,...,\alpha_d$ be an integral basis of $\mathcal O_K$, then $\beta\alpha_1,...,\beta\alpha_d$ are free $\ZZ$-module generators of $\langle\beta\rangle$. Same rank, so $\mathcal O_K/\langle\beta\rangle$ is finite.
\end{proof}
\begin{lem}
    Let $M\subset K$ be a f.g. $\mathcal O_K$-module. If $\alpha\in K$ and $\alpha M\subseteq M$, then $\alpha\in\mathcal O_K$.
\end{lem}
i.e., $\mathcal O_K$ is integrally closed.
\begin{proof}
    Let  $\beta_1,...,\beta_d$ be an integral basis of $\mathcal O_K$ and let $M=\alpha\mathcal O_K+\cdots+\alpha_k\mathcal O_K$, then $M=\sum_{i,j}\ZZ\alpha_i\beta_j$, so $M$ is f.g. as a $\ZZ$-mod.
\end{proof}

\begin{defn}[Dedekind domain]
    Noetherian, Integrally closed, Prime ideal iff maximal
\end{defn}
\begin{defn}
    A f.g. $\mathcal O_K$-submodule of $K$ is called a fractional ideal.
\end{defn}
\begin{rem}
    A fractional ideal $I\subseteq K$ is an (integral) ideal iff $I\subseteq \mathcal O_K$.
\end{rem}
\begin{lem}
    If $I\subseteq K$ is a fractional ideal, then $\exists a\in\ZZ$ s.t. $aI\trianglelefteq \mathcal O_K$ is an (integral) ideal. Conversely, if $I\trianglelefteq \mathcal O_K$ is an (integral) ideal, then $\alpha I$ is a fractional ideal for all $\alpha\in K$.
\end{lem}
\begin{proof}
    
\end{proof}
Multiplication can be extended to fractional ideals.
\begin{lem}
    Let $\mathfrak p\trianglelefteq\mathcal O_K$ be a prime idea. Then there exists a fractional ideal $\mathfrak p'$ s.t. $\mathfrak p\mathfrak p'=(1)$.
\end{lem}
\begin{proof}
    Let $\mathfrak p'=\{\alpha\in K:\alpha\mathfrak p\subseteq \mathcal O_K\}$. This is a $\mathcal O_K$-module. $\beta \mathfrak p'\subseteq\mathcal O_K$ for all $\beta\in\mathfrak p$. $\mathfrak p'$ is a f.g. $\mathcal O_K$-mod, i.e., a fractional ideal. Since $\mathfrak p\mathfrak p'\subseteq\mathcal O_K$, so it's an ideal. On the other hand ,$\mathfrak p'\mathfrak p\supseteq \mathfrak p$ and $\mathfrak p$ is prime, hence maximal. Either $\mathfrak p\mathfrak p'=(1)$ or $\mathfrak p\mathfrak p'=\mathfrak p$. If the latter holds, then $\alpha\mathfrak p\subseteq \mathfrak p$ and $\alpha\in\mathcal O_K$. Contradiction (integral closurenessiety)
\end{proof}
\begin{lem}
    Let $I\trianglelefteq \mathcal O_K$ be a non-zero ideal. Then there exists $\mathfrak p_1,...,\mathfrak p_k$ non-zero prime ideals s.t. $\mathfrak p_1\cdots\mathfrak p_k\subseteq I$. 
\end{lem}
\begin{proof}(Noetherian Induction) Suppose not true. Let $I$ be maximal among ideals for which it fails. In particular, $I$ cannot be a prime ideal. Find $\alpha,\beta\in\mathcal O_K$ s.t. $\alpha\beta\in I$ but $\alpha,\beta\notin I$. Consider $\langle\alpha\rangle+I$ and $\langle\beta\rangle+I$. Both contain $I$. Find $\mathfrak p_1,...,p_k$, $\mathfrak q_1,...,\mathfrak q_l$ s.t. $\mathfrak p_1\cdots\mathfrak p_k\subseteq\langle\alpha\rangle +I$ and $\mathfrak q_1\cdots\mathfrak q_l\subseteq\langle\beta\rangle+I$. Then $\mathfrak p_1\cdots\mathfrak p_k\mathfrak q_1\cdots\mathfrak q_l\subseteq I$. Contradiction.
\end{proof}
\begin{prop}
    If $\mathfrak p\subseteq\mathcal O_K$ is a prime, then there exists a fractional ideal $\mathfrak p'$ s.t. $\mathfrak p\mathfrak p'=(1)$.
\end{prop}
\begin{proof}
    //////////////////////////////////////////////
\end{proof}
\begin{thm}
    In a Dedekind domain, have unique factorization domain of ideals.
\end{thm}
\begin{proof}
Existence: suppose fail. Find a maximal $I$ for which there is no factorization into prime ideals. There exists a maximal (prime) ideal $\mathfrak p\supseteq I$. Consider $J=\mathfrak p^{-1}I$. For any $\alpha\in\mathfrak p^{-1}$, $\alpha\mathfrak p\subseteq\mathcal O_K$, so $\alpha I\subseteq\alpha\mathfrak p\subseteq\mathcal O_K$, so $J\subseteq\mathcal O_K$ is an (integral) ideal. Note that $J\neq I$ since there exists $\alpha\in\mathfrak p^{-1}\setminus\mathcal O_K$, so $\alpha I\not\subseteq I$. [Otherwise $\alpha I\subseteq I$ for all $\alpha\in\mathfrak p^{-1}$, which would imply $\mathfrak p^{-1}\subseteq\mathcal O_K$]. So $J$ is strictly larger. There exists $\mathfrak p_1,...,\mathfrak p_{k-1}$ s.t. $\mathfrak p_1\cdots\mathfrak p_{k-1}=J$ and $I=\mathfrak p J$. Contradiction.

Uniqueness: suppose $\mathfrak p_1\cdots\mathfrak p_k=\mathfrak q_1\cdots\mathfrak q_l$. induction
\end{proof}
\begin{crly}
    Every fractional ideal has an inverse.
\end{crly}
\begin{crly}
    If $I, J$ are two ideals in $\mathcal O_K$, then $I\supset J$ iff $\exists I_2\trianglelefteq\mathcal O_K$ s.t. $II_2=J$
\end{crly}
Notation: $I\mid J$.
\[\e:\tag{Owen's Signature}\]
\begin{crly}
    $\mathcal O_K$ is a UFD iff $\mathcal O_K$ is a PID.
\end{crly}
\begin{proof}
    $\Leftarrow:$ clear.\\
    $\Rightarrow:$ Every principal ideal is a product of principal prime ideals. Enough to show that every prime ideal is principal. Enough to show that every prime ideal divides a principal ideal. Let $\mathfrak p$ be a prime ideal and $\alpha\in\mathfrak p$. Then $\langle\alpha\rangle\subseteq \mathfrak p\implies \mathfrak p\mid \langle\alpha\rangle$.    
\end{proof}
\begin{defn}
    $I,J\trianglelefteq\mathcal O_K$ ideals. Define $\gcd(I,J)$ to be the smallest ideal dividing both.
\end{defn}
Have $\gcd(I,J)=I+J$ and $\operatorname{lcm}(I,J)=I\cap J$ (cf. ES2).

\section{Norm of Ideals}
Let $I\trianglelefteq\mathcal O_K$ be an ideal. 
\begin{defn}
    The norm of $I$, $N(I)$, is $|\mathcal O_K/I|$.
\end{defn}
Recall\begin{itemize}
    \item If $I$ is non-zero, then $N(I)<\infty$.
    \item If $I$ is generated by $\alpha_1,...,\alpha_d$ as a $\ZZ$-mod then $N(I)^2=\frac{\disc(\alpha_1,...,\alpha_d)}{\disc(K)}$
\end{itemize}
\begin{prop}
    Let $I,J\trianglelefteq \mathcal O_K$ be non-zero ideals. Then $N(IJ)=N(I)N(J)$.
\end{prop}
\begin{proof}
    Enough to prove this for $J$ prime. By isomorphism thm (of groups) $|\mathcal O_K/IJ|=|\mathcal O_K/I||I/IJ|$, i.e., $N(IJ)=N(I)|I/IJ|$. Claim that $|I/IJ|=N(I)$. Let $\alpha_1,...,\alpha_{N(I)}$ be coset representatives of $\mathcal O_K/J$. Then $\beta\alpha_1,...,\beta\alpha_{N(J)}$ are coset representatives of $I/IJ$ for some $\beta\in I\setminus IJ$. [Write $\langle\beta\rangle + IJ=\gcd(\langle\beta\rangle,IJ)=I$, so for all $\gamma\in I$, $\gamma=\alpha\beta+x$, where $\alpha\in\mathcal O_K$, $x\in IJ$. Find $\alpha_j$ s.t. $\alpha\in\alpha_j+J$, then $\gamma\in\alpha_j\beta+IJ$.] If $\beta\alpha_i\equiv\beta\alpha_j\mod IJ$, then $IJ\mid \beta(\alpha_i-\alpha_j)$. Write $\beta=I\mathfrak p_1\cdots\mathfrak p_k$ (where $\mathfrak p_i$ are prime ideals not equal to $J$). Then $IJ\mid I\mathfrak p_1\cdots \mathfrak p_k\langle\alpha_i-\alpha_j\rangle$, so $J\mid \langle\alpha_i-\alpha_j\rangle$, so $i=j$, so the choice of $\alpha_j$ is unique.
\end{proof}
\begin{prop}
    Let $\alpha\in\mathcal O_K$. Then $N(\langle\alpha\rangle)=|N_{K/\QQ}(\alpha)|$.
\end{prop}
\begin{proof}
    Let $\alpha_1,...,\alpha_d$ be an integral basis. Then $\alpha\alpha_1,...,\alpha\alpha_d$ generates $I$ as $\ZZ$-mod.
    \[\disc(\alpha\alpha_1,...,\alpha\alpha_d)=N(\alpha)^2\disc(\alpha_1,...,\alpha_d)\]
\end{proof}

Let $L/K$ be an extn of num field.
Given $I\trianglelefteq\mathcal O_K$, can construct 
\[I\mathcal O_L=\{\alpha_1\beta_1+\cdots+\alpha_k\beta_k:\alpha_i\in I, \beta_i\in\mathcal O_l, k\in\NN\}\]
Given ideals $J$ in $\mathcal O_L$, $J\cap\mathcal O_K$ is in $\mathcal O_K$. Note that
\((I\cap\mathcal{O}_K)(J\cap\mathcal{O}_K)\neq(IJ)\cap\mathcal{O}_K\) in general.
\[(=\tag{Owen's Signature}\]
\begin{prop}
    Let $L/K$ be an extension of number field. Let $\mathfrak p\trianglelefteq\mathcal O_K$, $\mathfrak q\trianglelefteq \mathcal O_L$ be primes. Then TFAE
    \begin{enumerate}[(i)]
        \item $\mathfrak q\mid \mathfrak p\mathcal O_L$\\
        \item $\mathfrak p=\mathfrak q\cap\mathcal O_K$
    \end{enumerate}
\end{prop}
\begin{proof}
    If $\mathfrak q\mid \mathfrak p\mathcal O_L$, then have $\mathfrak q\supset\mathfrak p\mathcal O_L\supset\mathfrak p$, so $\mathfrak p\subseteq\mathfrak q\cap\mathcal O_K$. Note that $1\notin \mathfrak q$, so by maximality, $\mathfrak p=\mathfrak q\cap\mathcal O_K$.

    If $\mathfrak p=\mathfrak q\cap\mathcal O_K$, then $\mathfrak q\supset \mathfrak p\mathcal O_L$, i.e., $\mathfrak q\mid \mathfrak p\mathcal O_L$.
\end{proof}
If one of these hold then say that $\mathfrak p$ lies under/below $\mathfrak q$ and $\mathfrak q$ lies above $\mathfrak p$.
\begin{lem}
    $L/K$ extension of num field. For all $\mathfrak q\trianglelefteq\mathcal O_L$ primes, there is a unique prime $\mathfrak p$ that lies under it. For all $\mathfrak p\trianglelefteq \mathcal O_K$, there is a $\mathfrak q\trianglelefteq \mathcal O_L$ that lies above it
\end{lem}
\begin{proof}
    $\mathfrak q$ prime ideal in $\mathcal O_L$. Let $\mathfrak p=\mathfrak q\cap \mathcal O_K$. $\mathfrak p$ is non-zero. [$\mathcal O_L/\mathfrak q$ is finite, so can find two distinct $\alpha,\beta\in\mathcal O_K$ s.t. $\alpha-\beta\in\mathfrak p$]. Need to check that $\mathfrak p$ is prime.
\end{proof}
\begin{defn}
    Ramification index $e(\mathfrak q|\mathfrak p)$ is the largest $e\in\ZZ$ s.t. $\mathfrak q^e\mid\mathfrak p\mathcal O_L$.

    Inertial degree is $f(\mathfrak q|\mathfrak p)=[\mathcal O_L/\mathfrak q:\mathcal O_K/\mathfrak p]$.
\end{defn}
Tower laws: given extension $M/L/K$, and let $\mathfrak p\subset\mathcal O_K,q\subset \mathcal O_L, \mathfrak r\subset \mathcal O_M$ s.t. $\mathfrak r$ lies over $\mathfrak q$ and $\mathfrak q$ lies over $\mathfrak p$. Then $e(\mathfrak r|\mathfrak p)=e(\mathfrak r|\mathfrak q)e(\mathfrak q|\mathfrak p)$, $f(\mathfrak r|\mathfrak p)=f(\mathfrak r|\mathfrak q)f(\mathfrak q|\mathfrak p)$.

$N(\mathfrak q)=N(\mathfrak p)^{f(\mathfrak q|\mathfrak p)}$.

\begin{lem}
    For all $I\trianglelefteq \mathcal O_K$, there is a $k\in\NN$ s.t. $I^k$ is principal.
\end{lem}
\begin{proof}
    Later.
\end{proof}
\begin{prop}
    Let $I\trianglelefteq \mathcal O_K$ be a non-zero ideal. Then $N(I\mathcal O_L)=N(I)^{[L:K]}$
\end{prop}
\begin{proof}
    If $I$ is principal, then $N(I)=|N_{K/\QQ}(\alpha)|$ and $I\mathcal O_L$ is principal in $\mathcal O_L$, generated by $\alpha$. So $N(I\mathcal O_L)=|N_{L/\QQ}(\alpha)|=|N_{K/\QQ}(\alpha)|^{[L:K]}$. Since ideal norm is multiplicative, the statement holds for $I$ iff it holds for $I^k$, $k\in\NN$. Apply the lemma.
\end{proof}
\begin{prop}
    Let $L/K$ be an extension of number fields. Let $\mathfrak p\trianglelefteq \mathcal O_K$ be a prime  ideal. Let $\mathfrak q_1,...,\mathfrak q_r$ be primes lying over $\mathfrak p$ in $\mathcal O_L$. Then $[L:K]=\sum_{i=1}^r f(\mathfrak q_i|\mathfrak p)e(\mathfrak q_i|\mathfrak p)$.
\end{prop}
\begin{proof}
    
\end{proof}
\begin{thm}[Dedekind]
    Let $K$ be a number field, and let $\mathfrak p\subseteq \mathcal O_K$ be a prime. Let $g\in\mathcal O_K[x]$ be a monic irred poly, and let $\alpha$ be a root of $g$. Let $L=K(\alpha)$. Let $p$ be the unique rational prime that lies under $\mathfrak p$. Assume $p\nmid [\mathcal O_L:\mathcal O_K[\alpha]]$. Let $\bar g$ be the image of $g$ in $(\mathcal O_K/\mathfrak p)[x]$. Write $\bar g=\bar g_1^{e_1}\cdots \bar g_r^{e_r}$ be the factorization of $\bar g$ in $(\mathcal O_K/\mathfrak p)[x]$ into monic polys. Let $g_i\in\mathcal O_K[x]$ be a monic polys that projects to $\bar g_i$. Then $\mathfrak q_j=\mathfrak p\mathcal O_L+ g_j(\alpha)\mathcal O_L$ is a prime lying over $\mathfrak p$ and $f(\mathfrak q_j|\mathfrak p)=\deg g_j$. $\mathfrak q_i$ are distinct and $\mathfrak p\mathcal O_L=\mathfrak q_1^{e_1}\cdots\mathfrak q_r^{e_r}$.
\end{thm}
\[(:\triangleright\tag{Owen's signature}\]
\begin{defn}
    A number field $K$ is monogenic if there exists $\alpha\in\mathcal O_K$ s.t. $\mathcal O_K=\ZZ[\alpha]$.
\end{defn}
\begin{prop}
    $\mathfrak p\mathcal O_L\supseteq \mathfrak q_1^{e_1}\cdots \mathfrak q_r^{e_r}$
\end{prop}
\begin{proof}
    Let $A\subseteq \mathcal O_L$ be the set of all elements that are products of $e_1$ elements from $\{\mathfrak p\cup g_1(\alpha)\}$ and $e_2 $ elements from $\{\mathfrak p\cup g_2(\alpha)\}$...... Have $\mathfrak q_1^{e_2}\cdots q_r^{e_r}=\langle A\rangle$. This is obvious for all elements except $g_1(\alpha)^{e_1}\cdots g_r(\alpha)^{e_r}\equiv g(\alpha)=0$ modulo $\mathfrak p\mathcal O_L$. 
\end{proof}
\begin{prop}
    The ring $\mathcal O_L/\mathfrak q_j$ is a factor of $(\mathcal O_K/\mathfrak p)[x]/\langle \bar g_j\rangle$.
\end{prop}
\begin{lem}
    Let $R_1,R_2,R_3$ be rings and $R_1\overset{\varphi_1}{\to}R_2\overset{\varphi_2}{\to}R_3$ a sequence of surjective ring homs. Suppose $A\subseteq R_2$ is s.t. $\ker\varphi_2=\langle A\rangle_{R_2}$ and $\tilde A\subseteq R_1$ s.t. $\varphi_1(\tilde A)=A$. Then $\ker(\varphi_2\circ\varphi_1)=\langle\tilde A\rangle_{R_1}+\ker\varphi_1$.
\end{lem}
\begin{proof}
    First prove $\mathcal O_K[\alpha]/\langle\mathfrak p,\bar g_j(\alpha)\rangle\cong(\mathcal O_K/\mathfrak p)[x]/\langle\bar g_j\rangle$. Consider the map
    \begin{center}
        % https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAB12BbOnACwDGjAAQB5APoBpZAA8KIAL6l0mXPkIoAjOSq1GLNpx78hDMVOSdGaPnXlKV2PASIAmHdXrNWiDt16CIhLSVgw2dgD0nAx0YADmDDBGAQBmAE50ANbCaKRx4gBWABSh4QCUnBnxiYrKIBhO6kTamrpeBr4l-iZBUlHdfOlZOWWy9nUNai4o7q2e+j4gXcaBZsH9K0PZaKNy-THVSewARnRpwvkFlbEJrAq6MFBx8ESg6RBcSGQgOBBI2npvIZ2PQ0jYsOJNLU3mkPl9qL8kABmeZA3ycNDYSHQkDvT6IAGIxDuQEdPyg8HiVw4vHIhF-RAAFlRZIxWOp9wUQA
        \begin{tikzcd}
        {\mathcal O_K[x]} \arrow[r, "\varphi_1"] \arrow[rd, "\psi_1"] & {\mathcal O_K[\alpha]} \arrow[r, "\varphi_2"]       & {\mathcal O_K[\alpha]/\langle\mathfrak p,g_j(\alpha)\rangle} \\
                                                              & {(\mathcal O_K/\mathfrak p)[x]} \arrow[r, "\psi_2"] & {(\mathcal O_K/\mathfrak p)[x]/\langle\bar g_j\rangle}      
        \end{tikzcd}
    \end{center}
    Apply the lemma. $\ker\varphi_2=\langle\mathfrak p,g_j(\alpha)\rangle$, $\tilde A=\mathfrak p\cup g_j$, so $\ker\varphi_2\circ\varphi_1=g\mathcal O_K[x]+\mathfrak p\mathcal O_K[x]+g_j\mathcal O_K[x]$.
    Similarly, $\ker\psi_2\circ\psi_1=g_j\mathcal O_K[x]+\mathfrak p\mathcal O_K[x]$. Note that $g\equiv \bar g_1^{e_1}\cdots \bar g_r^{e_r}\mod\mathfrak p\mathcal O_K[x]$, so $g\in\langle g_j,\mathfrak p\rangle$.

    Note $\mathfrak q_j\cap \mathcal O_K[\alpha]\supseteq \langle\mathfrak p,g_j(\alpha)\rangle$. Enough to show that $\mathcal O_L/\mathfrak q_j\cong \mathcal O_K[\alpha]/(\mathfrak q_j\cap \mathcal O_K[\alpha])$ is a factor of $\mathcal O_K[\alpha]/\langle\mathfrak p,g_j(\alpha)\rangle$. Enough to show $\mathcal O_K[\alpha]+\mathfrak q_j=\mathcal O_L$. As abelian groups, $\mathcal O_L/(\mathcal O_K[\alpha]+\mathfrak q_j)$ is a factor of both $\mathcal O_L/(\mathcal O_K[\alpha])$ and $\mathcal O_L/\mathfrak q_j$.

    ??????????????????????????????????????
\end{proof}
\[\overset{\sim}{\overset{O\vert O}{\frown}}\tag{Owen's Signature}\]
\begin{proof}[Proof of Dedekind thm]
    There is an ideal $I$ s.t. $(\mathfrak p\mathcal O_L)I=\mathfrak q_1^{e_1}\cdots\mathfrak q_r^{e_r}$. Take norm, noting $N(\mathfrak q_j)\le N(\mathfrak p)^{\deg g_j}$
    $N(\mathfrak p\mathcal O_L)N(I)=N(\mathfrak p)^{[L:K]}N(I)=\prod_{i=1}^rN(\mathfrak q_i)^{e_i}\le N(\mathfrak p)^{\sum e_i\deg g_i}=N(\mathfrak p)^{[L:K]}$. Note that none of the inequalities can be strict, so $N(I)=1$ and $N(\mathfrak q_j)=N(\mathfrak p)^{\deg g_j}$. $\mathcal O_L/\mathfrak q_j\cong \mathfrak p[x]/\langle \bar g_j\rangle$, so $\mathfrak q_j$ is a prime with inertial degree $\deg g_j$.

    Need to prove $\mathfrak q_i\neq \mathfrak q_j$ for $i\neq j$. We prove $\mathfrak q_i+\mathfrak q_j=\mathcal O_L$.
\end{proof}
\newcommand{\cl}{\operatorname{Cl}}
\section{Class Group}
$K$ number field. Let $\mathcal I=\mathcal I_K$ be the group of fractional ideal nad $\mathcal P=\mathcal P_K$ the subgroup of principal fractional ideals. THe class group of $K$ is $\cl(K)=\mathcal I/\mathcal P$.

Recall for all $I\in\mathcal I$, there exists $\alpha\in K$ s.t. $\langle\alpha\rangle I$ is an integral ideal. All classes in the class group contain integral ideals.
Alternatively, consider the rel $I\sim J$ iff $\exists \alpha\in K$ with $\alpha I=J$, then $\cl(K)$ is the set of equiv classes of integral ideals under $\sim$.
\begin{thm}
    $K$ number field. Then $\cl(K)$ is finite.
\end{thm}
\begin{defn}
    The class number of $K$ is $h(K)=|\cl(K)|$.
\end{defn}
\begin{thm}[Minkowski Bound 1]
    $K$ number field, and $I\trianglelefteq\mathcal O_K$ ideal. Then there exists $\alpha\in I$ s.t. \[|N(\alpha)|\le\frac{d!}{d^d}\left(\frac{4}{\pi}\right)^s\disc(K)^{1/2}N(I)\] where $s$ is the number of \textbf{pairs} of complex embeddings of $K$
\end{thm}
We let $M(K)=\frac{d!}{d^d}(\frac{4}{\pi})^s\disc(K)^{1/2}$
\begin{crly}[Minkowski Bound 2]
    All ideal classes in $\cl(K)$ contain an integral ideal of norm $\le M(K)$.
\end{crly}
\begin{proof}
    Let $\tilde I$ be a fractional ideal. Let $J$ be an integral ideal in the class of $\tilde I^{-1}$. Minkowski bound 1 says there exists $\alpha\in J$ with $N(\alpha)\le M(K)N(J)$ Since $J\supseteq \langle\alpha\rangle$, have $J\mid\langle\alpha\rangle$. Then $I=\langle\alpha\rangle J^{-1}$ is an integral ideal in the class of $\tilde I$. So $N(I)=|N(\alpha)||N(J)|^{-1}\le M(K)$.
\end{proof}
To show $|\cl(K)|<\infty$, suffices to show that the number of integral ideals of norm $\le X$ for some $X\in\RR_{>0}$ is finite. Each such ideal is the product of at most $\log_2X$ many primes. The primes that can occur lie over rational primes $\le X$. There are $\le X$ such rational primes and there are at most $\deg K$ many primes in $K$ lying over each.
\begin{crly}[Minkowski Bound 3]
    \[\disc(K)>\frac{d^{2d}}{(d!)^2}\dfrac{\pi^{2s}}{4^{2s}}\]
    In particular, $\disc K>1$ if $K\neq \QQ$.
\end{crly}
\begin{proof}
    $N(I)\ge 1$. Apply the previous result.
\end{proof}
\[\Lbag\tilde{\overset{\cdot.\cdot}{\frown}}\Rbag\tag{Owen's Signature}\]
\begin{thm}
    Let $I\trianglelefteq\mathcal O_K$ an ideal. Then there exists $\alpha\in I$ non-zero s.t. $|N(\alpha)|\le N(I)|\disc(K)|^{1/2}$.
\end{thm}
Recall $\Sigma:K\to\RR^d$ from a while ago. $\Sigma(\mathcal O_K)$ is a lattice in $\RR^d$ and $\operatorname{coVol}(\Sigma(\mathcal O_K))=2^{-s}|\disc K|^{1/2}$, where $s$ is the number of pairs of complex embedding (exclude real embeddings).
$I$ is a submodule, so $\Sigma(I)$ is a sublattice of $\Sigma(\mathcal O_K)$, so $\operatorname{coVol}(\Sigma(I))=2^{-s}|\disc I|^{1/2}=2^{-s}N(I)|\disc K|^{1/2}$.

Consider $\mathcal N:\RR^d\to\RR$, $(x_1,...,x_d)\mapsto\prod_{i=1}^r|x_i|\prod_{j=1}^s(x_{r+2j-1}^2+x_{r+2j}^2)$, so $|N(\alpha)|=\mathcal N(\Sigma(\alpha))$ for all $\alpha\in K$. WTS $\Sigma(I)$ contains a non-zero vector in the region $\{x\in\RR^d:\mathcal N(x)<X\}$.
\begin{thm}[Minkowski]
    Let $\Lambda\subseteq\RR^d$ be a lattice and $S\subseteq\RR^d$ a convex subset that is symmetric w.r.t. $0$. Assume that $\operatorname{Vol}(S)>2^d\operatorname{coVol}(\Lambda)$ Then $\Lambda\cap S$ contains a non-zero vector.
\end{thm}
\begin{lem}
    Let $\Lambda\subseteq \RR^n$ be a lattice and $S\subseteq\RR^d$ a Borel set with $\operatorname{Vol}(S)>\operatorname{coVol}(\Lambda)$. Then $\exists x,y\in S$ and $x-y\in\Lambda$.
\end{lem}
\begin{proof}
    $F$ fundamental domain. Consider $S(a)=(S\cap (F+a))-a$ for $a\in\Lambda$. $S(a)\subseteq F$. Have $\sum_{a\in\Lambda}\operatorname{Vol}(S(a))=\operatorname{Vol}(S)>\operatorname{Vol}(F)$. Then $\exists a\neq b$ in $\Lambda$ s.t. $S(a)\cap S(b)\neq\varnothing$. Let $x\in S(a)\cap S(b)$, then have $x+a,x+b\in S$ and $x+a-x-b\in\Lambda$.
\end{proof}
\begin{proof}[Proof of Minkowski]
    Apply the lemma with $\frac12S$ in place of $S$. We fine $x\neq y$ in $S$ with $\frac12x-\frac12 y\in\Lambda$ and $\frac12x-\frac12y=\frac12x+\frac12(-y)\in S$ by symmetry and convexity.
\end{proof}
\begin{proof}[Proof of Minkowski Bound 1]
    Consider the set $S=\{x:\forall i,\ |x_i|<Y\}$ for some suitable parameter $Y$. Observe $\operatorname{Vol}(S)=2^dY^d$ and $\mathcal N(x)\le 2^sY^d$ for all $x\in S$. By Minkowski theorem, find a non-zero element in $\Sigma(I)\cap S$ if we set $Y$ to satisfy $2^dY^d>2^{d-s}N(I)|\disc K|^{1/2}$. Find $\alpha\neq 0$ in $I$ s.t. $|N(\alpha)|=\mathcal N(\Sigma(\alpha))<N(I)|\disc K|^{1/2}+\e$ where $\e>0$ is arbitrary. $\Sigma(I)\cap S$ has finitely many non-zero point, so can take $\e=0$.
\end{proof}
\section{Units}
$\alpha\in\mathcal O_K$ is a unit if  $\alpha^{-1}\in\mathcal O_K$.
\begin{lem}
    Let $\alpha\in\mathcal O_K$. TFAE,
    \begin{enumerate}[(i)]
        \item $\alpha\in\mathcal O_K^\times$
        \item $\langle\alpha\rangle=\mathcal O_K$
        \item $N(\alpha)=\pm1$.
    \end{enumerate}
\end{lem}
\begin{proof}
    (i) iff (ii) clear. (i) $\Rightarrow$ (iii) clear ($N(1)=N(\alpha)N(\alpha^{-1})$). (iii) $\Rightarrow$ (ii) also clear since $N(\langle\alpha\rangle)=1$
\end{proof}
\subsection{Units in Quadratic Rings of Integers (Thank you Owen)}
\[\overset{\overset{\sim}{\text{\Sun}\vert\text{\Sun}}}{\overset{ \rotatebox[origin=c]{90}{\}}}{\smile}}\tag{Owen is late}\]
$m\in\ZZ$ square free. $K=\QQ(\sqrt m)$. If $m<-5$, then clearly the only units are $\pm 1$.
\begin{thm}
    For $m>1$ square free, $K=\QQ(\sqrt m)$, there exists a unique smallest unit $u>1$. All units are of the form $\pm u^n$ for $n\in\ZZ$. ($u$ is a fundamental unit)
\end{thm}
\begin{proof}
    (The proof of existence of $u$ is non-examinable.)
    If $u>1$ is a unit and $u=a+b\sqrt m$, $a,b\in\QQ$, then $a,b>0$. There is a smallest such $u$. If not, get a decreasing sequence of units $u_j$ converging to $1$, $u_{j}/u_{j+1}\to 1$ are units, but $u_j/u_{j+1}\ge (1+\sqrt m)/2>1$. Contradiction.
    All units are of the form $\pm u^n$. Otherwise if $v$ lies between two powers of $u$, then $1<vu^{-n}<u$ for some $n$
\end{proof}
\subsection{Dirichlet Units Theorem}
\begin{thm}[Dirichlet's Unit Theorem]$K$ number field with $r$ real embeddings and $s$ pairs of complex embeddings. Let $W$ be the set of roots of unity in $K$. Then $W$ is finite and there are $u_1,...,u_{r+s-1}\in\mathcal O_K^\times$ s.t. all units $v\in\mathcal O_K$ can be written uniquely as $v=wu_1^{n_1}\cdots u_{r+s-1}^{n_{r+s-1}}$, where $w\in W$ and $n_1,...,n_{r+s-1}\in\ZZ$.
\end{thm}
$\{u_1,...,u_{r+s-1}\}$ is called a fundamental system of units.

Let $\sigma_1,...,\sigma_r$ be real embeddings, $\tau_1,\bar\tau_1,...,\tau_s\bar\tau_s$ be complex embeddings. \newcommand{\Log}{\operatorname{Log}}
Define $\Log:K\to\RR^{r+s}$
\[\alpha\mapsto(\log(|\sigma_1(\alpha)|,\ldots,\log|\sigma_r(\alpha)|,2\log|\tau_1\alpha|,\ldots,2\log|\tau_s\alpha|)\]
Have
\[\sum_{j=1}^{r+s}\Log(\alpha)_j=\log\prod|\sigma_j\alpha|\prod|\tau_k\alpha|^2=\log|N(\alpha)|\]
so $\alpha\in\mathcal O_K^\times$ iff $\Log(\alpha)\in V= \{x_1+\cdots+x_{r+s}=0\}$
\begin{prop}
    If $\alpha\in\mathcal O_K$ satisfies $\Log(\alpha)=0$, then $\alpha\in W$. Moreover, $\ker\Log$ is finite.
\end{prop}
\[\overset{\overset{\approx^{\approx\approx}\approx}{\subset\overset{\smallfrown}{\bigodot}\overset{\smallfrown}{\bigodot}\supset}}{\overset{\hat{}}{\smile}}\tag{We are late}\]
\begin{proof}
    If $\Log(\alpha)=0$, then $\Log(\alpha^n)=0$ for all $n$, then $|\sigma_j(\alpha^n)|,|\tau_j(\alpha^n)|=1$. Consider $B\subseteq\RR^d$ (the set of pt s.t. all coords are $\le 1$), then $\Sigma^{-1}(B)\cap \mathcal O_K$ is finite, so can find $n<m$ with $\alpha^n=\alpha^m$, so $\alpha\in W$. Note that $\ker\Log\subseteq\Sigma^{-1}(B)\cap \mathcal O_K$, so finite.
\end{proof}
\begin{prop}
    The group $\Log(\mathcal O_K^\times)$ is free abelian generated by $\RR$-linearly independent elements. In particular, $\operatorname{rank}(\Log(\mathcal O_K^\times))\le r+s-1$.
\end{prop}
\begin{prop}[this is non-examinable]
    $\Log\mathcal O_K^\times$ spans $V$, so $\operatorname{rank}(\Log\mathcal O_K^\times)=r+s-1$.
\end{prop}

\begin{lem}
    $k\in\ZZ_{>0}$, $\Lambda\subseteq\RR^k$ additive subgrp. Suppose $B(0,R)\cap\Lambda$ is finite for all $R\in\RR_{>0}$. Then $\Lambda$ is free abelian generated by $\RR$-linearly indep elements
\end{lem}
\begin{proof}
    May assume that $\operatorname{span}(\Lambda)=\RR^k$ (if not, then we work in its span). Choose a basis $x_1,...,x_k\subseteq\Lambda$ of $\RR^k$. Let $\Lambda'$ be the lattice generated by $x_i$. Consider the fundamental parallelapiiped. $F$. $F\subseteq B(0,R)$ for some $R$. By assumption $F\cap \Lambda$ is finite. Since $F$ contains an element from each coset of $\Lambda'$, $[\Lambda:\Lambda']<\infty$, so $\Lambda$ is f.g. and $\Lambda=\Lambda'$.
\end{proof}
\begin{proof}
    Suffices to show $B(0,R)\cap \Log(\mathcal O_K^\times)$ is finite. Fix $R$, If $\Log\alpha\in B(0,R)$, then $|\sigma_j(\alpha)|<e^R$ and $|\tau_j(\alpha)|<e^R$, this is finite since $\Sigma(\mathcal O_K)$ is a lattice.
\end{proof}

\section{Cyclotomic Fields}
$\theta_n=e^{i2\pi/n}$
\begin{thm}
    Let $p\ge 3$ be a prime, $K=\QQ(\theta_p)$. Have $\mathcal O_K=\ZZ[\theta_p]$ and $\disc K=(-1)^{(p-1)/2}p^{p-2}$. There is a prime $\mathfrak p\trianglelefteq\mathcal O_K$ s.t. $\langle p\rangle=\mathfrak p^{p-1}$. For all $i\neq j$ in $\{0,1,...,p-1\}$, $\mathfrak p=\langle \theta_p^i-\theta_p^j\rangle$. The roots of unity in $K$ are $\{\pm\theta_p^j:j=0,...,p-1\}$
\end{thm}
\end{document}
