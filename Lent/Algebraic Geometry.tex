\documentclass{article}
\usepackage{graphicx} % Required for inserting images
\usepackage[utf8]{inputenc}
\usepackage{amsmath,amsfonts,amssymb,amsthm}
\usepackage{enumerate,bbm}
\usepackage{leftindex}
\usepackage{tikz,tikz-cd,graphicx,color,mathrsfs,color,hyperref,boldline}
\usepackage{caption,float}
\usepackage[a4paper,margin=1in,footskip=0.25in]{geometry}

\usepackage{listings}
\usepackage{xcolor}

\usepackage{tabularx,capt-of}

\usepackage{blindtext}
%Image-related packages
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage[export]{adjustbox}
\usepackage{lipsum}

%hyperref setup
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=cyan,
    pdftitle={Overleaf Example},
    pdfpagemode=FullScreen,
    }

%New colors defined below
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

%Code listing style named "mystyle"
\lstdefinestyle{mystyle}{
  backgroundcolor=\color{backcolour}, commentstyle=\color{codegreen},
  keywordstyle=\color{magenta},
  numberstyle=\tiny\color{codegray},
  stringstyle=\color{codepurple},
  basicstyle=\ttfamily\footnotesize,
  breakatwhitespace=false,         
  breaklines=true,                 
  captionpos=b,                    
  keepspaces=true,                 
  numbers=left,                    
  numbersep=5pt,                  
  showspaces=false,                
  showstringspaces=false,
  showtabs=false,                  
  tabsize=2
}

%"mystyle" code listing set
\lstset{style=mystyle}

\theoremstyle{definition}
\newtheorem{defn}{Definition}[section]
\newtheorem{example}[defn]{Example}
\theoremstyle{remark}
\newtheorem{rem}{Remark}
\newtheorem{remS}[section]{defn}
\theoremstyle{plain}
\newtheorem{lem}[defn]{Lemma}
\newtheorem{thm}[defn]{Theorem}
\newtheorem{prop}[defn]{Proposition}
\newtheorem{fact}[defn]{Fact}
\newtheorem{crly}[defn]{Corollary}
\newtheorem{conj}[defn]{Conjecture}

%\newtheorem*{programming*}{Programming Task}

%\newtheorem{innercustomgeneric}{\customgenericname}
%\providecommand{\customgenericname}{}
%\newcommand{\newcustomtheorem}[2]{%
%  \newenvironment{#1}[1]
%  {%
%   \renewcommand\customgenericname{#2}%
%   \renewcommand\theinnercustomgeneric{##1}%
%   \innercustomgeneric
%  }
%  {\endinnercustomgeneric}
%}

%\newcustomtheorem{question}{Question}
%\newcustomtheorem{programming}{Programming Task}

\newcommand{\NN}{\mathbb{N}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\CC}{\mathbb{C}}
\newcommand{\PP}{\mathbb{P}}
\newcommand{\FF}{\mathbb{F}}
\newcommand{\bA}{\mathbb{A}}
\newcommand{\Hom}{\operatorname{Hom}}
\newcommand{\im}{\operatorname{im}}
\newcommand{\id}{\operatorname{id}}
\newcommand{\Ind}{\operatorname{Ind}}
\newcommand{\Res}{\operatorname{Res}}
\newcommand{\e}{\varepsilon}

\newcommand{\calD}{\mathcal{D}}

\newcommand{\sol}{\textit{Solution: }}

\newcommand\dashto{\mathrel{
  -\mkern-6mu{\to}\mkern-20mu{\color{white}\bullet}\mkern12mu
}}

\title{Algebraic Geometry}
\author{Kevin}
\date{January 2025}

\begin{document}
\maketitle
\section{Motivating Examples and Introduction}
\[\backslash:\tag{Owen's signature}\]
Consider $f(x,y)=x^2+y^2-1$ over $\RR$. Roots of $f$: unit circle.
\begin{itemize}
    \item $1$-dim manifold
    \item smooth
    \item irreducible
\end{itemize}
Algebraically, consider the quotient ring $R[x,y]/I$, where $I=(x^2+y^2-1)$.
\begin{itemize}
    \item transcendence degree $1$ over $\RR$.
    \item localizations are independent of choices
    \item $I$ is a prime ideal
\end{itemize}
\begin{example}
    $x^n+y^n=z^n$ over $\ZZ$. (no non-trivial solutions when $n\ge 3$) Assume $n=2$. Can identify (not a bijective correspondence) the solution sets with $\{(x,y)\in\QQ^2:x^2+y^2=1\}$. Consider the line $L_t:y=tx+1$. $L_t$ meets the circle at $(-2t/(1+t^2),(1-t^2)/(1+t^2))$. In $\QQ^2$, if $t\in \QQ$, then 
    \[t\leftrightarrow\left(\dfrac{-2t}{1+t^2},\dfrac{1-t^2}{1+t^2}\right)\]
    is a fully algebraic identification of the solution set with the base field.
\end{example}
\begin{rem}
    Care about intersections.
\end{rem}
\begin{example}
    FTA. The set of zeros of a polynomial over $\CC$ is $\{(z,y)=(z,p(z)):z\in\CC\}\cap\{(z,y):y=0\}\subseteq\CC^2$.
\end{example}
\begin{defn}
    Let $L/k$ be a field extension. We say $x\in L$ is algebraic over $k$ if there exists a non-zero $p_x\in k[z]$ s.. $p_x(x)=0$. Otherwise, $x$ is transcendental over $k$. Say $L/k$ is algebraic if all elemnts of $L$ are algebraic over $k$
\end{defn}
Recall that every field $k$ has a (unique up to iso) maximal algebraic extension $\bar k$, its algebraic closure.

\textbf{In this course, we work over an algebraically closed field of characteristic $0$.}

\subsection{The Projective Plane}
FTA predicts that every two lines in a plane intersect at a point, unless they are parallel.
\begin{defn}
    The projective plane: $\PP^2_k=\PP^2=\{(x,y,z)\in k^3\setminus\{(0,0,0)\}\}/\{(x,y,z)\sim\lambda(x,y,z),\lambda\neq 0\}$.
\end{defn}
Denote $[(x,y,z)]=(x:y:z)$. We have an inclusion $k^2\hookrightarrow\PP_k^2, (x,y)\mapsto (x:y:1)$. The points at infinity are $\{(x:y:0)\}\subseteq\PP_k^2$.

A line $ax+by-c=0$ in $k^2$ dosen't have well-defined solution set in $\PP^2$, but its homogenization $ax+by+cz=0$ does.

\begin{defn}
    A projective plane curve is
    \[\{(x:y:z)\in\PP^2\colon F(x,y,z)=0\}\]
    for some non-zero homogeneous poly $F$.
\end{defn}
If $f\in k[x,y]$, then $z^{\deg f}f(x/z,y/z)=F(x,y,z)$ is homogeneous of the same degree.
\begin{defn}
    If $C=\{f(x,y)=0\}\subseteq k^2$ and $F$ is the homogenization of $f$, we say that $\{(x:y:z)\in\PP^2:F(x,y,z)=0\}$ is the projective closure of $C$ in $\PP^2$.
\end{defn}

\section{Affine Varieties}
\begin{defn}
    Affine $n$-space over $k$ is the set $\bA_k^n=k^n$. A polynomial $f(x_1,...,x_n)\in k[x_1,...,x_n]$ is also a function $\bA^n\to k$. The zero set (vanishing locus) of a subset $S\subseteq k[x_1,...,x_n]$ is the set $Z(S)=\{P\in\bA^n:\forall f\in S,\ f(P)=0\}$. An affine algebraic set is any subset of some $\bA^n$ of the form $Z(S)$ for some $S\subseteq k[x_1,...,x_n]$.
\end{defn}
\begin{defn}
    If $f\in k[x_1,...,x_n]$ is a non-constant polynoimal, then $Z(f)$ is a hypersurface. In particular, if $f$ is linear, $Z(f)$ is a hyperplane.
\end{defn}
\begin{example}
    The twisted cubic is $\{(t,t^2,t^3)\in\bA^3:t\in k\}=Z(t-x^2,z-x^3)$.It is non-planar (not contained in any hyperplane).
\end{example}
\begin{prop}
    Let $S\subseteq k[x_1,...,x_n]$ be a set of polys. Then
    \begin{enumerate}
        \item[(i)] $Z(S)=Z((S))$, where $(S)\trianglelefteq k[x_1,...,x_n]$ is the ideal generated by $S$.
        \item[(ii)] There exists $f_1,...,f_r\in S$ s.t. $Z(S)=Z(f_1,...,f_r)$.
    \end{enumerate}
\end{prop}
\begin{proof}
    (i) is trivial. (ii) follows from $k[x_1,...,x_n]$ being Noetherian.
\end{proof}
\begin{prop}
    Affine algebraic sets satisfy
    \begin{enumerate}
        \item[(i)]$S\subseteq T\subseteq k[x_1,...,x_n]\implies Z(T)\subseteq Z(S)$.
        \item[(ii)] $\bA^n,\varnothing$ are affine algebriac sets.
        \item[(iii)] Given a collection $\{S_i\}_{i\in I}$ of subsets of $k[x_1,...,x_n]$, $\bigcap_{i\in I} Z(S_i)=Z(\bigcup_{i\in I}S)$.
        \item[(iv)] If $S,T\subseteq k[x_1,...,x_n]$ are finite, then $Z(S)\cup Z(T)=Z(ST)$.
    \end{enumerate}
\end{prop}
\begin{proof}
    (i)-(iii) clear. (iv) by direct calculation.
\end{proof}
\begin{defn}
    The Zariski topology on $\bA$ is the topology whose closed sets are affine algebraic subsets. This is indeed a topology by preceding proposition.
\end{defn}
\begin{defn}
    A distinguished open set in $\bA^n$ is any set $\bA^n\setminus Z(f)$ for a single $f$.
\end{defn}
Note that Zariski topology is very coarse. The intersection of two non-empty open sets is non-empty and dense. Will prove in ES1 that distinguished open sets form a basis of Zariski topology. (Also on ES1) The Zariski topology on a product is the the product of Zariski topology. If $X\in \bA^n$ is affine algebraic, then the subspace topology agrees with the Zariski topology on $X$.

\begin{defn}
    A topological space $X$ is irreducible if $X$ is cannot be written as $X=X_1\cup X_2$ with $X_1, X_2$ closed and proper. Otherwise, $X$ is reducible.
\end{defn}
e.g. $Z(xy)$ is reducible.
\begin{defn}
    An affine variety is an irreducible (w.r.t. Zariski topology) affine algebraic set.
\end{defn}
If $f\in k[x_1,...,x_n]$ is irreducible then $Z(f)$ is irreducible.

\section{Ideals and the Nullstellensatz}
\begin{defn}
    $X\subseteq \bA^n$. The ideal of $X$ is $I(X)=\{f\in k[x_1,...,x_n]:\forall P\in X,\ f(P)=0\}$
\end{defn}
\begin{prop}[Properties of $I(X)$ for $X$ algebraic]
    Let $X, Y$ be affine algebraic sets in $\bA^n$.
    \begin{enumerate}[(1)]
        \item If $S\subseteq k[x_1,...,x_n]$, then $S\subseteq I(Z(S))$;
        \item $X=Z(I(X))$
        \item $X=Y$ iff $I(X)=I(Y)$.
        \item $X\subseteq Y$ iff $I(Y)\subseteq I(X)$
    \end{enumerate}
\end{prop}
\begin{proof}
    (1) clear from defn. 

    (2) Clearly $X\subseteq Z(I(X))$. Conversely, write $X=Z(S)$, so $S\subseteq I(X)$, so $Z(I(X))\subseteq Z(S)=X$.

    (3) follows from (2).

    (4). If $X\subseteq Y$, then $I(Y)\subseteq I(X)$ by defn. Conversely, if $P\in X\setminus Y$, then (2) implies that $P\not\in Z(I(Y))$, so there exists $f\in I(Y)$ with $f(P)\neq 0$.
\end{proof}
\begin{prop}
    Any affine algebraic set is a finite union (unique up to ordering, ES1) of irred. affine algebraic sets (varieties).
\end{prop}
\begin{proof}
    Let $X$ be affine algebraic. Suppose $X$ is reducible (otherwise done), i.e., $X=X_1\cup X_1'$. If $X$ is not a finite union of varieties, then wlog $X_1$ is not a finite union of varieties. We can write $X_1=X_2\cup X_2'$ s.t. $X_2$ fails to be a finite union of varieties. Continue, get a descending chain of affine alg sets. By the preceding prop, get an ACC in $k[x_1,...,x_n]$, which eventually stabilizes, i.e., eventually $X_n$ is a finite union of varieties.
\end{proof}
Get maps $Z(\cdot ),\ I(\cdot )$
\[\left\{\text{affine alg subsets of }\bA^n\right\}\overset{X\leftrightarrow I(X)}{\longleftrightarrow}\left\{I\trianglelefteq k[x_1,...,x_n]\right\}\]
$I(\cdot)$ does not have full image, e.g., $(x^2)$.
\begin{prop}
    $X\subseteq\bA^n$ affine alg set. Then $X$ is irreducible iff $I(X)$ is a prime ideal.
\end{prop}
\begin{proof}
    Suppose $X$ is reducible, write $X=X_1\cup X_2$ proper closed. Then $I(X)=I(X_1)\cap I(X_2)$. By (3) of the previous proposition, there exists $f\in I(X_1)\setminus I(X_2)$ and $g\in I(X_2)\setminus I(X_1)$. Then $fg\in I(X)$ but $f,g\not\in I(X)$, so $I(X)$ is not prime.

    Conversely, if $I(X)$ is not prime, then can find $f,g\not\in I(X)$ but $fg\in I(X)$. Define $X_1=X\cap Z(f)$ and $X_2=X\cap Z(g)$. These are proper closed subsets and $X_1\cup X_2=X$, so $X$ is reducible. 
\end{proof}

\begin{thm}[Weak Nullstellensatz]
    The maximal ideals of $k[x_1,...,x_n]$ are those of the form $(x_1-a_1,x_2-a_2,...,x_n-a_n)$ for some $(a_1,...,a_n)\in k^n$.
\end{thm}
Proof postponed.
\begin{crly}[Weak Nullstellensatz]
    If $I\subsetneq k[x_1,...,x_n]$ is a proper ideal, then $Z(I)\neq\varnothing$.
\end{crly}
\begin{proof}
    Any proper ideal is contained in a maximal ideal which has the form $(x_1-a_1,...,x_n-a_n)=\mathfrak m$, so $(a_1,...,a_n)\in Z(\mathfrak m)$.
\end{proof}
\begin{defn}
    Let $I\trianglelefteq k[x_1,...,x_n]$. The radical ideal of $I$ is $\sqrt I=\{f\in k[x_1,...,x_n]:\exists m>0,\ f^m\in I\}$.
\end{defn}
Note that $I\subseteq\sqrt I$ and $Z(I)=Z(\sqrt I)$.
\begin{thm}[Hilbert's Nullstellensatz]
    Let $J\trianglelefteq k[x_1,...,x_n]$. Then $\sqrt J=I(Z(J))$.
\end{thm}
\begin{proof}
    By defn, $\sqrt J\subseteq I(Z(J))$.

    Write $J=(f_1,...,f_r)$ and let $g\in I(Z(J))$. Define another ideal $\tilde J=(f_1,...,f_r,x_{n+1}g(x_1,...,x_n)-1)\trianglelefteq k[x_1,...,x_{n+1}]$. If $\tilde P\in Z(\tilde J)$, then the projection $P$ to the first $n$ coords is in $Z(f_i)$ for all $1\le i\le r$, so $g(P)=0$. Contradicting $x_{n+1}g-1=0$, so $Z(\tilde J)=\varnothing$, so $1\in \tilde J$ by weak Nullstellensatz, so $\exists h_1,...,h_{n+1}\in k[x_1,...,x_{r+1}]$ with $\sum_{i=1}^r h_if_i+h_{r+1}(x_{n+1}g-1)=1$. On the set where $x_{n+1}g=1$, we have $\sum_{i=1}^r h(x_1,...,x_n,1/g(x_1,...,x_n))g(x_1,...,x_n)=1$. Clear denominators by a sufficiently high power of $g$. Get
    \[\sum_{i=1}^rh_i'(x_1,...,x_n)f_i(x_1,...,x_n)=g(x_1,...,x_n)^N\]
    so $g\in\sqrt J$.
\end{proof}

\section{Coordinate Rings and Morphisms}
\begin{crly}
    There is a bijective correspondence
    \begin{align*}\{\text{affine alg subsets of $\bA^n$}\}&\longleftrightarrow\{\text{radical ideals in }k[x_1,...,x_n]\}\\
    & X\rightarrow I(X)\\
    &Z(J)\leftarrow J
    \end{align*}
\end{crly}
\begin{proof}
    $Z(I(X))=X$ and $I(Z(J))=\sqrt J$.
\end{proof}
This specializes to 
\[\{\text{affine varieties in }\bA^n \}\leftrightarrow\{\text{prime ideals of }k[x_1,...,x_n]\}\]

\begin{defn}
    $X\subseteq\bA^n$ affine algebraic set. The coordinate ring on $X$ (the ring of regular functions on $X$) is $A(X)=k[x_1,...,x_n]/I(X)$. [Alternative notations include $\mathcal O_X,\mathcal O(X), k[X]$,...]
\end{defn}
\begin{rem}
    Have an algebraic description of evaluation of $P\in X$. Write $P=(p_1,...,p_n)$, then
    \[ev_P=k[x_1,...,x_n]\to k[x_1,...,x_n]/(x_1-p_1,...,x_n-p_n)\overset\cong\to k\]
    Call $\mathfrak m_P=(x_1-p_1,...,x_n-p_n)$, then $\mathfrak m_P=I(\{P\})$. For $P\in X\in\bA^n$, $I(X)\subseteq\mathfrak m_P$, and the image of $\mathfrak m_P$ in $A(X)$ is the ideal of regular functions on $X$ which vanish at $P$.
\end{rem}
\begin{defn}
    $X\subseteq \bA^n$, $Y\subseteq\bA^m$ affine alg. sets. A morphism (regular map) from $X$ to $Y$ is $f:X\to Y$ s.t. $\exists p_1,...,p_m\in A(X)$ with $f(P)=(p_1(P),...,p_m(P))$ for all $P\in X$. Denote the set of morphisms $X\to Y$ by $\operatorname{Mor}(X,Y)$. In particular, if $Y=\bA^1$, then $\operatorname{Mor}(X,\bA^1)=A(X)$.
\end{defn}
\begin{defn}
    Let $f:X\to Y$ be a morphism. The pullback of $f$ is $f^\ast:A(Y)\to A(X)$, $g\mapsto g\circ f$. 
\end{defn}
\begin{enumerate}[1)]
    \item Morphisms are cts w.r.t. Zariski topology. If $Z=Z(g_1,...,g_r)\subseteq Y$, then
    \[f^{-1}(Z)=\bigcap_i f^{-1}(Z(g_i))=\bigcap_i Z(f^\ast g)=Z(f^\ast g_1,...,f^\ast g_r)\]
    \item Morphisms need not be closed, e.g., $\pi_x:\bA^2\to\bA^1$ sends $Z(xy-1)$ to $\bA^1\setminus\{0\}$.
    \item Functorial.
    \item Pullback $f^\ast:A(Y)\to A(X)$ is a ring hom, which restricts to the identity on $k$, i.e., $f^\ast$ is a $k$-algebra hom.
\end{enumerate}
\begin{example}
\begin{enumerate}[1)]
    \item Let $n\ge m$, $\pi:\bA^n\to\bA^m$ projection on to the first $m$ coords. Then $\pi$ is a morphism and $\pi^\ast:k[y_1,...,y_m]\to k[x_1,...,x_n]$ is given by $y_i\to y_i\circ \pi=x_i$, i.e., this map is the natural inclusion.
    \item $f:\bA^1\to Z(y-x^2)\subseteq\bA^2$, $t\mapsto (t,t^2)$. Then $f^\ast:k[x,y]/(y-x^2)\to k[t]$, $x\mapsto t,\ y\mapsto t^2$, is an iso. More gnerally, the affine $d$-Veronese embedding of $\bA^1$ is the image of $t\mapsto (t,t^2,...,t^d)\subseteq\bA^d$ (degree $d$ Veronese curve).
\end{enumerate}
\end{example}
\begin{thm}
    Let $X\subseteq\bA^n$, $Y\subseteq\bA^m$ be affine alg. sets. Then $f\mapsto f^\ast$ defines a bijection $\operatorname{Mor}(X, Y)\to \Hom_k(A(Y),A(X))$
\end{thm}
\begin{proof}
    Let $x_1,...,x_n$, $y_1,...,y_n$ be coords on $\bA^n$, $\bA^m$ respectively. A morphism $f:X\to Y$ described by $P\mapsto (f_1(P),...,f_m(P))$, $f_i\in A(X)$. Then $f^\ast y_i=f_i$ by defn, so $f$ can be recovered from $f^\ast$, i.e., the map is inj. 
    
    If $\lambda:A(Y)\to A(X)$ is a $k$-algebra hom. Define $f_i=\lambda(y_i)$ and $f:X\to \bA^m$ by $f=(f_1,...,f_m)$.\\
    \textbf{Claim: $f(X)\subseteq Y=Z(I(Y))$, i.e., $g\circ f$ vanishes for all $P\in X$ and all $g\in I(Y)$} We have $g\circ f=g(f_1,...,f_m)=g(\lambda(g_1),...,\lambda(g_m))=\lambda(g)$, so this is $0$ if $g\in I(Y)$. Note that $\lambda=f^\ast$, since $\lambda(y_i)=f^\ast(y_i)$.
\end{proof}
\begin{defn}
    A morphism $f:X\to Y$ is an isomorphism if $f$ is bijective and $f^{-1}$ is a morphism.
\end{defn}
Note that being bijective does not imply being an iso, e.g., $X=\bA^1$, $Y=Z(y^2-x^3)\subseteq\bA^2$. $f:X\to Y,\ t\mapsto (t^2,t^3)$ is a bijective morphism. If $f^{-1}$ is a morphism, then $\exists fg\in k[x,y]$ s.t. $g(t^2,t^3)=t$. Contradiction.
\begin{crly}
    $f:X\to Y$ is an iso iff $f^\ast$ is an iso.
\end{crly}
This is affine.  Will see that $\hat\CC$ (Riemann sphere) is a proj. variety. If $f$ is a fn on $\hat\CC$ which looks like a finite-valued poly everywhere, then it's constant by Liouville.

\section{Proof of Nullstellensatz}
\begin{defn}
    $S$ is a finitely generated $R$-algebra if $\exists s_1,...,s_n\in S$ s.t. $S=R[s_1,...,s_n]$. Say $S$ is integral over $R$ if $\exists$ monic poly $f\in R[x]$ with $f(s)=0$.
\end{defn}
\begin{prop}
    Let $s\in S$, TFAE,
    \begin{enumerate}[1)]
        \item $s$ is integral over $R$,
        \item $R[s]$ is a f.g. $R$-mod
        \item $\exists$ f.g. $R$-mod $R'$ which is a subring of $S$ s.t. $R[s]\subseteq R'$.
    \end{enumerate}
\end{prop}
\begin{proof}
    1)$\Rightarrow$2): Take a monic poly $f$ which annihilates $s$, then $R[s]$ is generated by $1,s,...,s^{\deg (f)-1}$ as $R$-mod.

    2)$\Rightarrow$3): Take $R'=R[s]$.

    3)$\Rightarrow$1): Write $R'=Rv_1+\cdots+Rv_n$. Consider the multiplication by $s$. Let $A$ be the matrix of this $R$-lienar map. Then $Av=sv$, so $(A-s\id)v=0$, so $\det (A-s\id)=0$ and $\det (A-s\id)$ is monic over $R$, so $s$ is integral over $R$.
\end{proof}
\begin{crly}
    If $R\subseteq S$ are rings and $S$ is f.g. as an $R$-alg and $R$-mod, then all elements of $S$ are integral over $R$.
\end{crly}
\begin{lem}[Zariski's lemma]
    Let $K/k$ be a field extension. If $K$ is a f.g. $k$-algebra, then $K$ is a f.g. $k$-module.
\end{lem}
Now prove Weak Nullstellensatz assuming Zariski's lemma.
\begin{proof}[Proof of Weak Nullstellensatz]
    Note that $(x_1-a_i,...,x_n-a_n)$ is maximal in $k[x_1,...,x_n]$.

    Suppose $\mathfrak m\trianglelefteq k[x_1,...,x_n]$ is maximal. so $k\hookrightarrow k[x_1,...,x_n]\to k[x_1,...,x_n]/\mathfrak m=K$, so $K/k$ is a field extension. $K$ is f.g. as $k$-algebra, so f.g. as $k$-mod (Zariski), so the extension is finite. But $k$ is alg-closed, so the extension is trivial. $\phi$ is surj. Define $a_i=\phi^{-1}(x_i\mod \mathfrak m)$, so $x_i-a_i\in\mathfrak m$. Then $\mathfrak m=(x_1-a_1,...,x_n-a_n)$ by maximality of the other.
\end{proof}
\begin{prop}
    Suppose $k\subseteq k(s)$ is a field extension and $s$ is transcendental over $k$. Then
    \begin{enumerate}[1)]
        \item $k[s]$ is a UFD, and contains an infinite set of pairwise coprime elements.
        \item If $t\in k(s)$ is integral over $k[s]$, then $t\in k[s]$.
    \end{enumerate}
\end{prop}
\begin{proof}
    1) The map $k[x]\to k[s]$ is an iso. If we can only find a finite set of monic irreducible pairwise coprimes $p_1,...,p_k$, then $p_1\cdots p_k+1$ is pairwise coprime to everything on the list.

    2) Write $t=p(s)/q(s)$ and suppose $\exists f_0,...,f_{n-1}\in k[s]$ s.t. $(p/q)^n+f_{n-1}(p/q)^{n-1}+\cdots+f_0=0$. If $p,q$ are coprime, then $q$ is const, i.e., $t\in k[s]$.
\end{proof}
\begin{proof}[Proof of Zariski's lemma]
    Induction on the number of generators of $K$ as a $k$-alg.
    Base case: $K$ is generated by $s$. $s^{-1}\in k[s]$, so $s$ is alg over $k$ so integral over $k$, so $K$ is f.g. as a $k$-mod. Suppose the lemma holds for $<n$ generators. Let $K=k[s_1,...,s_n]$. Apply inductive hypothesis to $k(s_1)$, so $K$ is a f.g. $K(s_1)$-mod. If $s_1$ is alg, then done. Suppose $s_1$ is transcendental over $k$. Note that each $s_i$, $2\le i\le n$ is alg over $k(s_1)$, so $\exists f_{ij}\in k(s_1)$ s.t. $s_i^{n_i}+\cdots+f_{i,n-1}s_i^{n_{i}-1}+\cdots+f_{i,0}=0$. There exists $f\in k[s_1]$ s.t. $(fs_i)^{n_i}+ff_{i,n-1}(fs_i)^{n-1}+\cdots+f^{n_i}f_0=0$, so $fs_i$ is integral over $k[s_1]$. If $h\in k(s_1)\subseteq K=k[x_1,...,x_n]$, then $\exists N$ s.t. $f^Nh\in k[s_1][fs_2,...,fs_n]$, so $f^Nh$ is integral over $k[s_1]$. Since $k[s_1]$ is integrally closed, $f^Nh\in k[s_1]$. This holds for all $h$, so choose $h=1/t$, $t$ is coprime to $f$ by the previous prop, so contradiction. So $s_1$ is algebraic.
\end{proof}

\begin{defn}
    Let $X\subseteq\bA^n$ be an affine variety. The function field of $X$, $k(X)$ is the fraction field of $A(X)$. Its elements are called rational functions on $X$ ($k=\CC$: meromorphic). If $\varphi\in k(X)$ can be represented by $f/g$, with $g(P)\neq 0$ for $P\in X$, then we say $\varphi$ is regular at $P$.
\end{defn}
\begin{defn}
    If $\mathfrak p$ is a prime ideal in an ID $R$ with field of fractions $K$. The localization of $R$ at $\mathfrak p$ is $R_{\mathfrak p}=\{a/b\in K:b\not\in\mathfrak p\}$.
\end{defn}
\begin{defn}
    A local ring is a ring with a unique maximal ideal
\end{defn}
\begin{defn}
    Let $X$ be an affine variety, and $x\in X$. The local ring of $X$ at $x$ is $\mathcal O_{X,x}=\{\varphi=f/g: f,g\in A(X), g(x)\neq 0\}$. This is the localization of $A(X)$ at the prime ideal $\{f\in A(X):f(x)=0\}$. (the image of $\mathfrak m_x$)
\end{defn}
\begin{prop}
    Let $X$ be an affine variety, $x\in X$. $\mathcal O_{X,x}$ has a unique maximal ideal $\mathfrak m_{x}=\{\varphi\in\mathcal O_{X,x}:\varphi(x)=0\}$.
\end{prop}
\begin{proof}
    $\varphi=f/g\in \mathcal O_{X,x}$ has multiplicative inverse iff $f(x)\neq 0$ iff $\varphi\not\in\mathfrak m_x$. Any proper ideal of $\mathcal O_{X,x}$ is contained in $\mathfrak m_x$. 
\end{proof}
\begin{lem}
    If $R$ is a Neotherian ID and $\mathfrak p$ is a prime ideal of $R$, then $R_{\mathfrak p}$ is Noetherian.
\end{lem}
\begin{proof}
    Given an ACC in $R_{\mathfrak p}$. Take the preimage under the projection map. Get an ACC in $R$ which stabilizes. Argue by contradiction.
\end{proof}
\begin{defn}
    $X$ affine variety. For $U\subseteq X$ open, $\mathcal O_X(U)=\bigcap_{x\in U}\mathcal O_{X,x}$ is the ring of regular functions on $U$.
\end{defn}
\begin{lem}
    $\mathcal O_X(X)=A(X)$
\end{lem}
\begin{proof}
    ``$\supseteq$'' clear.

    ``$\subseteq$'': If $\varphi\in\bigcap_x\mathcal O_{X,x}$. Define $I_{\varphi}=\{h\in A(X):h\varphi\in A(X)\}$. If $I_\varphi$ is proper, then it is contained in a maximal ideal. By weak Nullstellensatz, $\exists P\in X$ s.t. $h(P)=0$ for all $h\in I_{\varphi}$. But $\varphi$ is regular at $P$, i.e., $\varphi=f/g$, $g(P)\neq 0$. Contradiction. So $1\in I_\varphi$.
\end{proof}

\begin{rem}
    It can happen that $\varphi$ requires more than one representation as fractions, e.g. in $\bA^4$, $X=Z(xw-yz)$. Let $\varphi=x/y\in k(X)$ regular on $X\cap \{y=0\}$. Also $\varphi=z/w$ on $X$, which is regular for $w\neq 0$, so $\varphi$ is regular on $(X\cap\{y\neq 0\})\cup (X\cap \{w\neq 0\})$.
\end{rem}

\begin{prop}
    Let $f:X\to Y$ be a cts (in Zariski topology) map of affine varieties. Then TFAE,
    \begin{enumerate}[1)]
        \item $f$ is a morphism.
        \item for all $x\in X$ and all $\varphi\in\mathcal O_{Y,f(x)}$, $f^\ast\varphi\in\mathcal O_{X,x}$
    \end{enumerate}
\end{prop}
\begin{proof}
    If $f$ is a morphism and $\varphi=g/h$ where $h(f(x))\neq 0$, then $f^\ast=(g\circ f)/(h\circ f)$ and $h\circ f\neq 0$ at $x$, so $f^\ast\varphi\in\mathcal O_{X,x}$. 

    Conversely, if $\varphi\mapsto\varphi\circ f$ induces a map $\mathcal O_{Y,f(x)}\to \mathcal O_{X,x}$ for all $x\in X$, then we have
    \[f^\ast:\bigcap_{f(x)\in f(X)\subseteq Y}\mathcal O_{Y,f(x)}\to\bigcap_{x\in X}\mathcal O_{X,x}=A(X)\]
    Restrict to $A(Y)$, get $f^\ast:A(Y)\to A(X)$. Evaluating $f^\ast$ at each coordinate $y_1,...,y_n$ gives a morphism.
\end{proof}

\section{Projective Varieties}

Consider the projective $n$-space $\PP^n=\PP^n_k$.
Have $\PP^n=\bA^n\cup\PP^{n-1}$. Call pts in $\PP^{n-1}$ in this decomposition ``pts at infinity''.

We define $U_i=\{[x_0:\cdots:x_n]\in\PP^n:x_i\neq 0\}$ for $0\le i\le n$ (standard affine patch of $\PP^n$), and $\PP^n\setminus U_i$ is a coordinate hyperplane. 

\begin{prop}
    With the quotient topology, $\CC P^n$ is compact.
\end{prop}
\begin{defn}
    The Zariski topology on $\PP^n$ is the quotient topology induced by the projection $\bA^{n+1}\setminus\{0\}\to \PP^n$.
\end{defn}
\begin{example}
    $n=1$. (ES1) Zariski closed subsets in $k^2$ are $\varnothing$, $k^2$, finite unions of curves and points. So $\varnothing,\PP^1$ and the curves which contain lines through $0$ are lines through $0$ (cf. ES1), so get finite sets too.
\end{example}
\begin{defn}
    A polynomial $F\in k[x_0,...,x_n]$ is homogeneous if all its monomials have the same degree.
\end{defn}
\begin{lem}
    Let $F$ be a homogeneous poly of degree $d$ in $k[x_0,...,x_n]$. Then $Z(F)$ is a well-defined subset of $\PP^n$.
\end{lem}
\begin{proof}
    
\end{proof}
\begin{defn}
    An algebraic set in $\PP^n$ is any set of the form $Z(S)$, where $S$ is a collection of homogeneous polys (not necessarily of the same degree).
\end{defn}
Can define a topology on $\PP^n$ where closed sets are algebraic sets. (Q1ES2) This coincides with the Zariski topology on $\PP^n$.
\begin{defn}
    An ideal $I\trianglelefteq k[x_0,...,x_n]$ is homogeneous if it is  generated by homogeneous polys (not necessarily of the same degree).
\end{defn}
Note that $(x,x^3+y^2)\trianglelefteq k[x,y]$ is an ideal generated by non-homogeneous polys, but can rewrite it as $(x,y^2)$ which is homogeneous.
\begin{lem}
    Let $I\trianglelefteq k[x_0,...,x_n]$. Then TFAE,
    \begin{enumerate}[1)]
        \item $I$ is homogeneous
        \item If $f\in I$, then the degree $d$ part $f_d\in I$, where $f_d$ is the sum of all degree $d$ monomials of $f$.
    \end{enumerate}
\end{lem}
\begin{proof}
    1)$\Rightarrow$2): If $I$ is homogeneous, then $I=(f_1,...,f_k)$ s.t. $\deg f_i=d_i$ and $f_i$ homogeneous. Given $g\in I$, decompose $g$ as a $k[x_0,...,x_n]$-linear combination of $f_i$ and write down the degree $d$ part of $g$.

    2)$\Rightarrow$1): If $f_1,...,f_s$ generate $I$, then $\bigcup_{i=1}^s\bigcup_{d\ge 0}\{(f_i)_d\}$ generate $I$ and are all homogeneous. 
\end{proof}

As in the affine case, we have
\begin{prop}
    For homogeneous ideals $I_j\trianglelefteq k[x_0,...,x_n]$ we have 
    \begin{enumerate}[1)]
        \item $I_1\subseteq I_2\implies Z(I_1)\supseteq Z(I_2)$;
        \item $\bigcap Z(I_j)=Z(\bigcup I_j)$
        \item $Z(I_1)\cup Z(I_2)=Z(I_1I_2)$.
    \end{enumerate}
\end{prop}
\begin{defn}
    An algebraic set in $\PP^n$ is $Z(I)$ for any homogeneous ideal $I$. A projective variety is any irreducible algebraic set in $\PP^n$.
\end{defn}
\begin{example}
    Suppose $f_1,...,f_r$ are linear homogeneous in $k[x_0,...,x_n]$. Each $Z(f_i)\subseteq k^{n+1}$ is a vector subspace, so $Z(f_1,...,f_r)\subseteq k^{n+1}$ is too. Then $Z(f_1,...,f_r)\subseteq\PP^n$ is a projective linear space in $\PP^n$. E.g., $Z(ax+by+cz)\subsetneq\PP^2$. This is parametrized by a projective line, for example, if $a\neq 0$ then $(b:a:0)$ and $(-c:-:a)$ are distinct pts on $Z(ax+by+cz)$.  The map $(t,u)\mapsto (bt-cu:-at:au)$ identifies $\PP^1$ as this projective linear space.
\end{example}
\begin{example}
    Any element of $GL_{n+1}(k)$ induces a well-defined map on $\PP^n$. The action has kernel $\{\lambda I:\lambda\in k^\ast\}$. (cf. ES2)
\end{example}

\textbf{Varieties do not need to be irreducible.}
\begin{defn}
    If $F\in k[x_0,...,x_n]$ is a non-const homogeneous poly, then $Z(F)\subseteq\PP^n$ is called a hypersurface in $\PP^n$.
\end{defn}
\begin{example}
    Segre surface $\Sigma_{1,1}=Z(x_0x_3-x_1x_2)\subseteq\PP^3$. Consider the function of sets
    $\PP^1\times\PP^1\to\PP^3,\ ((t_0:t_1),(u_0:u_1))\mapsto (t_0u_0:t_0u_1:t_1u_0:t_1u_1)$. This defines a bijection $\PP^1\times\PP^1\to\Sigma_{1,1}$. This identification is the defn of $\PP^1\times\PP^1$ as a projective variety.
\end{example}
\begin{example}
    (Rational normal curve of degree $n$ in $\PP^n$) Consider $\PP^1\to\PP^n,\ (t:u)\mapsto (t^n:t^{n-1}u:\cdots:u^n)$ (bijective to its image). When $n=3$ this is the (projective) twisted cubic. It's the zero locus of $3$ quadrics in $k[x_0,...,x_3]$ and cannot be written as $Z(f_1,f_2)$ (ES2).
\end{example}

(From projective to affine) Given a proj. variety $V=Z(I)\subseteq\PP^n$. Define $I_0=\{F(1,x_1,...,x_n):F\in I\}$ (dehomogenization) in $k[x_1,...,x_n]$ with $V_0=Z(I)$. Then $V_0=C\cap U_0$, where $U_0$ is the standard patch with $x_0\neq0$.

(From affine to proj) If $V$ is an affine variety, then $V\subseteq \PP^n$ via an inclusion. This is not necessarily closed in $\PP^n$. Can take the closure in Zariski topology.
\begin{defn}
    If $f\in k[x_1,..,x_n]$, then the homogenization of $f$ is $F=x_0^{\deg f}f(\frac{x_1}{x_0},\ldots,\frac{x_n}{x_0})$.
\end{defn}
If $V=Z(I)\subseteq \bA^n$, then define $I^\ast$ to be the ideal generated by all homogenization of elements of $I$. Write $V^\ast=Z(I^\ast)\subseteq\PP^n$. Under the standard inclusion of the patch $U_0$, $V^\ast\cap U_0=V$. Call $V^\ast$ the projective closure of $V$. It is the minimal projective variety containing $V$, i.e., if $V\subseteq Y=Z((F_1,...,F_s))\subseteq\PP^n$, then each dehomogenization $f_i$ of $F_i$ vanishes on $V$, so each $f_i$ is in $I(V)$, so $F_i\in I^\ast$, so $I(Y)\subseteq I(V^\ast)$,so $V^\ast=Z(I(V^\ast))\subseteq Z(I(Y))=Y$.
\begin{example}
    The affine Fermat curve $Z(x^n+y^n-1)$ has homogenization $x^n+y^n=z^n$ which gives a curve in $\PP^2$ (the projective closure). The points at infinitey ($z=0$) are precisely  $(1:\zeta:0),\ \zeta^n=-1$. 
\end{example}
\begin{example}
    Consider $V=Z(x_0x_2-x_1^2)\subseteq\PP^2$. Dehomogenize w.r.t. each variable, get affine pieces $Z(x_2-x_1^2)$,  $(x_0x_2-1)$, $Z(x_0-x_1^2)$.
\end{example}
\begin{example}
    Let $F$ be a homogeneous poly of deg $2$ in $k[x_0,....,x_n]$. $Q=Z(F)$ is a quadric hypersurface. Can choose coordinates so that this is identified with $Z(x_0^2+\cdots+x_r^2)$, where $r+1$ is the rank of the quadratic form.
\end{example}
\subsection{Projective Nullstellensatz}
\begin{defn}
    Let $X\subseteq\PP^n$ Define the ideal of $X$ to be $I(X)$, generated by homogeneous polys which vanish on $X$. The affine cone over $X$ is $C(X)=\{(x_0,...,x_n)\in\bA^{n+1}:(x_0:\cdots:x_n)\in X\}\cup\{0\}\subseteq\bA^{n+1}$.
\end{defn}
\begin{prop}[Projective Nullstellensatz]\
    \begin{enumerate}[(1)]
        \item If $X_1\subseteq X_2\subseteq\PP^n$ are algebraic, then $I(X_2)\subseteq I(X_1)$
        \item  If $X\subseteq\PP^n$ is algebraic, then $Z(I(X))=X$
        \item For any homogeneous ideal $J\trianglelefteq k[x_0,...,x_n]$ and $Z(J)\neq\varnothing$, then $I(Z(J))=\sqrt{J}$.
        \item If $J$ is a homogeneous ideal with $Z(J)=\varnothing$, then either $J=(1)$ or $J(x_0,...,x_n)$.
    \end{enumerate}
\end{prop}
\begin{proof}
    (1) and (2) are the same as affine cases. 

    (3): Given such $J$, have $C(Z(J))\neq\varnothing$. By affine Nullstellensatz,  $I(Z(J))=\sqrt{J}$.

    (4): $Z(J)$ viewed in $\bA^{n+1}$ is either empty or $\{0\}$. By affine Nullstellensatz, $\sqrt{J}$ contains $x_0,...,x_n$.
\end{proof}

\begin{defn}
    If $V\subseteq\PP^n$ is a projective variety and $W\subseteq  V$ is also a projective variety, then we say that $W$ is a (closed) subvariety of $V$, and $V\setminus W$ is an open subvariety of $V$. Open subvarieties of projective varieties (including $\varnothing$) are quasi-projective varieties.
\end{defn}
\begin{prop}\
    \begin{enumerate}[(i)]
        \item Every projective variety is a finite union of irreducible proj. varieties,
        \item a projective variety $X$ is irreducible iff $I(X)$ is prime.
    \end{enumerate}
\end{prop}
\begin{proof}
    (1) identical to the affine argument. (2) If $X$ is reducible, then $\pi:C(X)\setminus\{0\}\to X$ shows that $C(X)$ is reducible, so $I(X)$ is not prime (by the affine version). If $I(X)$ is not prime, so $C(X)=V_1\cup V_2$, closed proper subsets. Define $Z_i=Z(f(\lambda x_0,...,\lambda x_n):f\in I(V_i),\lambda\in k^\times)$ (lines through $0$ in $V_i$). Note that $Z_i\subseteq V_i$, so proper. Since closet subsets of $\bA^1$ are $\bA^1,\varnothing,$ finite sets. Each line is in either $Z_1$ or $Z_2$, so $C(X)=Z_1\cup Z_2$. Apply $\pi$, $X$ is reducible.
\end{proof}
A subset $S\subseteq X$ of an algebraic set $X$ is Zariski dense iff any poly $f$ vanishing on $S$ vanishes on $X$.
\begin{prop}
    Let $X\subseteq\PP^n$ be irred proj. variety, $Y\subsetneq X$ closed subvariety. Then $X\setminus Y$ is Zariski dense in $X$.
\end{prop}
\begin{proof}
    Let $f\in I(X\setminus Y)$. By projective Nullstellensatz, $I(X)\subsetneq I(Y)$, so find $g\in I(Y)\setminus I(X)$, so $fg\in I(X)$ and $g\not\in I(X)$, so $f\in I(X)$ ($X$ is irred.).  
\end{proof}
\subsection{Functions on Projective Space}
\begin{defn}
    If $X\subseteq\PP^n$ be an irred projective variety. The function field (field of rational functions) of $X$ is $k(X)=\{f/g:f,g,h\in k[x_0,...,x_n]\text{ homogeneous of equal degree},\ g\notin I(X)\}/\sim$, where $f_1/g_1\sim f_2/g_2$ iff $f_1g_2-f_2g_1\in I(X)$.
\end{defn}
Can check that $\sim$ is an equiv relation.
\begin{prop}
    Let $X\subseteq\PP^n$ be a projective variety and $X\subsetneq\{x_0=0\}$ (so that $X_0=X\cap U_0$) is non-empty and open. Then $k(X)=k(X_0)$.
\end{prop}
\begin{proof}
    The map $f/g\mapsto f(1,y,...,y_n)/g(1,y,...,y_n)$ provides an isomorphism.
\end{proof}
\begin{defn}
    Let $X\subseteq\PP^n$ be an irred projective variety and $\varphi\in k(X)$, and $P\in X$. Then $\varphi$ is regular at $P$ if $\exists$ representative $f/g$ of $\varphi$ with $g(P)\neq 0$. Then the local ring at $P$ is $\mathcal O_{X,P}=\{\varphi\in k(X):\varphi\text{ regular at }P\}$. 
\end{defn}
\begin{prop}
    Suppose $X\subseteq \PP^n$ not contained in $\{x_0=0\}$. Let $P\in X\cap U_0$, where $U_0$ is the first affine patch. Then $\mathcal O_{X,P}=\mathcal O_{X_0,P}$.
\end{prop}
\begin{proof}
    Normalize the first coord, cf. the last proof.
\end{proof}
\begin{example}
    If $k=\CC$ and consider $\PP^1_{\CC}$ (Riemann sphere). If $\varphi\in \CC(\PP^1_\CC)$ is regular at all points, then $\varphi$ gives a holomorphic map $\CC_\infty\to\CC$ which is necessarily constant by Liouville.
\end{example}
\begin{prop}
    There are no non-constant rational functions on $\PP^1$ which are regular at all points.
\end{prop}
\begin{proof}
    If $\varphi\in k(\PP^1)$ with representative $f(x_0,x_1)/g(x_0,x_1)$, with no common factors of degree $d$, then $f(1,x_1),g(1,x_1)$ have no common root. [If $x_1-\alpha$ is a factor of $g(1,x_1)$, then $x_1-\alpha x_0$ is a factor of $g$. If $\alpha$ is a root of $g$, and $\varphi=h/k$, then $kf-hg=0$, so $k(1,x_1)f(1,x_1)=h(1,x_1)g(1,x_1)$. Since $f(1,\alpha)\neq 0$, conclude that $k(1,\alpha)=0$, but now $\varphi$ fails to be regular at $(1,\alpha)$.] So $g(1,x_1)$ has no roots, so $g(x_0,x_1)=cx_0^d$ for some constant $c$. Symmetric argument applies to $x_0$, so $g(x_0,x_1)=c'x_1^d$, so $d=0$, so $\varphi$ is constant.
\end{proof}
\begin{crly}
    $\PP^n$ has no non-constant rational functions which are regular everywhere.
\end{crly}
\begin{proof}
    If $\varphi\in k(\PP^n)$ is non-constant, then find $P,Q\in\PP^n$ s.t. $\varphi(P)\neq\varphi(Q)$. Restrict to the projective line $L$ connecting $P,Q$. Then apply the preceding proposition to get a contradiction.
\end{proof}
\subsection{Maps Between Projective Varieties}
Suppose $F_0,...,F_m\in k[x_0,...,x_n]$ are homogeneous of the same degree. Then $F=(F(x_0,...,x_n),...,F(x_0,...,x_n)):k^{n+1}\to k^{m+1}$. This induces a well-defined map $\PP^n\setminus(\bigcap_iZ(F_i))\to\PP^m$. For any homogeneous $G\in k[x_0,...,x_n]$, $(F_0G:\cdots:F_mG)$ defines the same map on a smaller set.

\begin{defn}
    Let $X\subseteq\PP^n$ be a projective variety, $F_0,..,F_m\in k[x_0,...,x_n]$ homogeneous of the same degree, not all in $I(X)$. Then we have a well-defined map $F:X\setminus\bigcap_iZ(F_i)\to\PP^m$. We say that $F$ and $G$ (as above) determine the same rational map if they agree where both defined (a Zariski dense open subset). This is an equiv rel, and an equiv class is called a rational map on $X$, denoted $F:X\dashto\PP^m$.
\end{defn}
[Note that $F$ is equiv to $G$ can be checked by the condition $F_iG_j-G_iF_j\in I(X)$ for all $i,j$.]
\begin{defn}
    A rational map $F$ is regular at $P\in X$ if there exists representative $(F_0:\cdots:F_m)$ with $F_i(P)\neq 0$. The domain of $F$ is the set of regular points of $F_i$ and $X\setminus\text{domain}$ is the set of indeterminate points of $F$.
\end{defn}
\begin{defn}
    A rational map is said to be a morphism if it is regular at all points of $X$. In this case write $F:X\to \PP^n$ (solid arrow). If $F:X\to Y\subseteq\PP^m$ (morphism) for some algebraic subset $Y$, then $F$ is a morphism. A morphism is an isomoprhism if there exists an inverse. A rational map is birational if it has rational inverse.
\end{defn}
\begin{example}
    If $F_0,...,F_m$ are degree $1$ homogeneous polys, get a rational map from $\PP^n$ to $\PP^m$. This is a morphism iff the matrix has full rank $n+1\le m+1$.
\end{example}
\begin{example}[Projection from a point]
    Suppose $P=(0:\cdots:0:1)$. Define projection from $P$ (to the hyperplane $x_n=0$) by
    \[\pi(x_0:\cdots:x_n)=(x_0:\cdots:x_{n-1})\]
    Note that $\pi$ is not regular at $P$ but is regular at all other points. Suppose $X=Z(F)$ for some deg $d$ homogeneous poly. If $P\notin X$, the $\pi_X:X\to\PP^{n-1}$ is a morphism. Fix $a=(a_0:\cdots:a_{n-1})\in\PP^{n-1}$. $\pi^{-1}(a_0:\cdots:a_{n-1})$  intersects $X$ at $(x_0:\cdots:x_n)=(a_0\lambda:\cdots:a_{n-1}\lambda:\ast)$ iff $f(a_0,....,a_{n-1},x_n)=0$. Note that $\deg f(a_0,...,a_{n-1},x_n)\le \deg f$ in the variable $x_n$, so we have $\le\deg f$ such points.

    Consider $n=2$, $X=Z(x_0x_2-x_1^2)$, then $\pi(x_0:x_1:x_2)=(x_0:x_1)\sim(F_0:F_1)$ iff $x_1F_0+x_0F_1\in(x_0x_2-x_1^2)$, so $F_0=-x_1$, $F_1=x_2$ is an example which is defined at $P$. So $\pi|_{X}$ is an isomorphism $Z(x_0x_2-x_1^2)\simeq\PP^1$. More generally,
    \begin{defn}
        Let $n,d\ge 1$ and $N=\binom{n+d}{n}-1$. Then $\nu_d:\PP^n\to\PP^N,\ (x_0:\cdots:x_n)\mapsto (x_0^d:\cdots x_0^{d-1}x_1:x_0^{d-2}x_2:\cdots:x_n^d)$ is the degree $d$ Verenoese embedding of $\PP^n$.
    \end{defn}
    $\nu_d(\PP^n)$ is a projective variety, and $\nu_d$ is an isomorphism.
\end{example}
\begin{rem}
    A homogeneous degree $d$ poly $F$ has zero locus $Z(F)\subseteq\PP^n$ $\leftrightarrow$ the hyperplane from the coefficients of $F$ intersected with $\nu_d(\RR^n)$, i.e., $F=a_0x_0^d+a_1x_0^{d-1}x_1+\cdots+a_Nx_n^d$ $\leftrightarrow$ hyperplane $a_0z+\cdots+a_Nz_N$
\end{rem}
\begin{example}
    Let $m,n\ge 1$ and define $N=(n+1)(m+1)-1$. The Segre embedding is $\sigma_{m,n}:\PP^m\times\PP^n\to\PP^N,\ ((x_0:\cdots:x_m),(y_0:\cdots:y_n))\mapsto(x_0y_0:x_0y_1:\cdots:x_my_n)=(x_iy_j)_{0\le i\le m,0\le j\le n}$.
    \begin{prop}
        $\sigma_{m,n}$ is a bijection and the projection maps forming its inverse are morphisms. We have $\Sigma_{m,n}:=\sigma_{m,n}(\PP^m\times\PP^n)=Z(I)$, where $I$ is the ideal generated by $(z_{ij}z_{pq}-z_{iq}z_{pj})$, $0\le i,p\le m$, $0\le j,q\le n$. This ideal is prime, so $\Sigma_{m,n}$ is irreducible.
    \end{prop}
    \begin{proof}
        $\sigma_{m,n}(\PP^m\times\PP^n)\subseteq Z(I)$ clear.

        If $(a_{00}:\cdots:a_{mn})\in Z(I)$, then $\exists i,j$ s.t. $a_{ij}\neq 0$ and wlog assme $a_{ij}=1$. Define $x=(x_0,...,x_m)$ by $x_p=a_{pj}$ and $y=(y_0:\cdots y_n)$ by $y_q=a_{iq}$. The image $z_{00}:z_{01}:\cdots z_{mn}$ of $(x,y)$ satisfies $z_{pq}=x_py_q=a_{pj}a_{iq}=a_{pq}$, so the reverse inclusion also holds.

        To see that $I$ is prime, note that it is the kernel of $k[z_0,...,z_{mn}]\to k[x_0,...,x_m,y_0,...,y_n],\ z_{ij}\mapsto x_iy_j$.
    \end{proof}
\end{example}
\begin{defn}
    Let $X\subseteq\PP^m, Y\subseteq\PP^n$ be proj. varieties. The Zariski topology on $X\times Y$ is the topology given by identification of $X\times Y$ and $\sigma_{mn}(X\times Y)$.
\end{defn}
\begin{example}
    $m=n=1$. $\PP^1\times\PP^1$ is identified with $Z(z_0z_3-z_1z_2)$. Fix $P\in\PP^1$, then $P\times\PP^1$ and $\PP^1\times P$ are closed curves in $Z(z_0z_3-z_1z_2)$ isomorphic to $\PP^1$.
\end{example}

\begin{thm}
    Projective varieties are complete, i.e., if $X$ is proj, then for any variety $Y$, the second projection $X\times Y\to Y$ is closed. (Algebro-geometric version of compactness)
\end{thm}
Proof omitted

Recall that this is false for affine varieties.

\begin{crly}
    Let $f:X\to Y$ be a morphism of projective varieties. Then $f$ is a closed map.
\end{crly}
\begin{proof}
    Consider $X\to X\times Y$, $x\mapsto (x,f(x))$. Running through the defn of Segre embedding, $\id\times f$ is a closed map. $X$ is complete, so $f=\pi_2\circ (\id\times f)$ is closed.
\end{proof}
\begin{crly}
    Let $X$ be an irreducible projective variety. Then all regular functions on $X$ are constant.
\end{crly}
\begin{proof}
    If $f$ is regular on $X$, $f:X\to\bA^1\to\PP^1$ is a closed map, so $f(X)$ is a finite union of pts. So $|f(X)|=1$ by irreducibility, i.e., $f$ is constant.
\end{proof}
\subsection{Algebro-geometric Correspondence}
\begin{defn}
    A rational map $f:X\dashto Y$ of irreducible projective varieties is dominant if $f(X)$ is dense in $Y$.
\end{defn}
A rational map is birational if it has rational inverse. In this case  there exists $U$ open dense in $X$ and $V$ open dense in $Y$ s.t. $U$ is isomorphic to  $V$.
\begin{example}[Monomial maps]
    Take $A\in\operatorname{SL}_n(\ZZ)$ and define a rational map $h_A:\bA^n\to \bA^n$ by $(t_1,...,t_n)\mapsto (t_1^{a_{11}}\cdots t_n^{a_{1n}},...,t_1^{a_{n1}}\cdots t_n^{a_{nn}})$ By defn $h_A$ is a morphism on $\bA^n\setminus Z(t_1,...,t_n)$. Homogenize/extend to a map $\PP^n\to\PP^n$. This is birational with inverse $h_{A^{-1}}$.

    If $A=-I$, get $h_A(t_1,t_2)=(1/t_1,1/t_2)$. Homogenize. $h_A([t_0:t_1:t_2])=[t_1t_2:t_0t_2:t_0t_1]$. [Cremona involution]
\end{example}
\begin{rem}
    If $f:X\to Y$ and $g:Y\to Z$ are rational maps, then $g\circ f$ is a rational map if $f$ is dominant. In particular, if $\varphi:X\to Y$ (rational) is dominant and $g$ is a rational function on $Y$, then $g\circ \varphi$ is a rational function on $X$, i.e., a dominant $X\to Y$ induces $\varphi^\ast k(Y)\to k(X)$ which is injective.
\end{rem}
\begin{thm}
    Let $X,Y$ be varieties. The map $\varphi\mapsto\varphi^\ast$ is a bijective correspondence 
    \[\{\text{dominant rational maps }X\to Y\}\leftrightarrow\{k\text{-extensions }k(Y)\hookrightarrow k(X)\}\]
\end{thm}
\begin{proof}[Proof Sketch (Non-examinable)]
    Wlog, assme $X,Y$ affine. Suppose $i:k(Y)\to k(X)$. Consider generators $y_j$ of $A(Y)$. write $i(y_j)=a_j/b_j$ for $a_j,b_j\in A(X)$. These each define regular functions on $X\setminus\bigcup Z(b_j)=X'$. We obtain a map $A(Y)\to A(X')$, so there is a morphism $X'\to Y$, which is a rational map from $X$ to $Y$.
\end{proof}
\section{Singularities and Tangent Spaces}
If $Z(f)\subseteq\bA^n$, then there is a linear subspace $V$ at $P=(p_1,...,p_n)\in X$ given by
\[V=\{(x_1,...,x_n)\in\bA^n:\nabla f\cdot (x-P)=0\]
This is the ``tangent plane'' at $P$
\begin{defn}
    Let $X\subseteq\bA^n$ be an affine variety. $P\in X$ a point. The tangent space to $X$ at $P$ is 
    \[T_{X,P}=\{(v_1,...,v_n)\in k^n:\forall f\in I(X),\ \nabla f(p)\cdot v=0\}\]
\end{defn}
\begin{example}
    Consider $X=Z(x+y+z^2+xyz,x-2y+z+x^2y^2z^2)\subseteq\bA^3$ and $P=(0,0,0)$. Then $T_{X,0}=\{(v_1,v_2,v_3):v_1+v_2=0,\ v_1-2v_2+v_3=0\}$ (line)
\end{example}
\begin{example}
    $Y=Z(x+y+z^3+xyz,x+y+x^2+y^3+4z^5)$, $T_{X,0}=\{v_1+v_2=0\}$ (plane)
\end{example}
If $P=0$, then $T_{X,P}$ is generated by the linear part of elements of $I(X)$.

Suppose $X=\bA^n$. If $f(P)=0$, i.e., $f\in\mathfrak m_P$ (either in $k[x_1,....,x_n]$ or $\mathcal O_{X,P}$), define $df=\text{linear part of }f$, i.e., $a_1x_1+\cdots+a_nx_n$. The map $f\mapsto df$ can be throught of as a map $\mathfrak m_P\to T_{\bA^n,0}^\ast$ (dual) The kernel is $\mathfrak m_P^2$. There is an identification $T_{\bA^n,0}\cong\mathfrak m_P/\mathfrak m_P^2$ (cotangent space to $X$ at $P$).
[Small algebraic lemma: $\mathfrak m_P.\mathfrak m_P^2$ is the same when considered in $A(X)$ and $\mathcal O_{X,P}$]
\begin{prop}
    Let $X\subseteq\bA^n$ be an affine variety, $P\in X$. Then there is a natural iso of vect spaces $(T_{X,P})^\ast\cong\mathfrak m_P/\mathfrak m_P^2$.
\end{prop}
\begin{proof}
    $X\subseteq\bA^n$, so $T_{X,P}\subseteq k^n$. So there is a surj map $(k^n)^\ast\cong k^n\to T_{X,P}^\ast$. Wlog, translate to $P=0$. Composing the restriction map with $f\mapsto df$, we get
    \[D:M\to (k^n)^\ast\to T_{X,P}^\ast\]
    where $M=(x_1,...,x_n)$.
    $D$ is surj. Suppose $f\in\ker D$, i.e., $f\in MA(X)$ and $Df=0$. Then $df$ is a linear combination of linear parts of elements of $I(X)$, so $f\in M^2$, so this descends to the claimed iso.
\end{proof}
\begin{defn}
    Let $X\subseteq \PP^n$ be a projective variety. $P\in X$. The tangent space to $X$ at $P$ is $T_{X_i,P}$ for any affine patch $X_i$ of $X$. We write $T_{X,P}$.
\end{defn}
The previous proposition, $T_{X,P}$ is well-defined.

If $X\subseteq \PP^n$ and $Y\subseteq \PP^m$ are proj. varieties and $\varphi:X\dashto Y$ a dominant rational map, $P\in$ domain of $\varphi$. Wlog assume affine (patch containing $P$ and patch containing $\varphi(P)$)
\begin{defn}
    Write $\varphi=(f_1,...,f_m)$
    Define a linear map $d\varphi_P=T_{X,P}\to T_{Y,\varphi(P)}$ by
    \[(v_1,...,v_n)\mapsto \left(\sum_{i=1}^nv_i\frac{\partial f_1}{\partial x_i}(P),...,\sum_{i=1}^nv_i\frac{\partial f_m}{\partial x_i}(P)\right)\]
\end{defn}
 \begin{prop}
     With the notation above, 
     \begin{enumerate}[(i)]
         \item $d\varphi_P(T_{X,P})\subseteq T_{Y,\varphi(P)}$
         \item $d\varphi_P$ is linear and independent of the choice of representation of $\varphi$.
         \item If $\psi:Y\dashto Z$ dominant rational map, then $d(\psi\circ\varphi)_P=d\psi_{\varphi(P)}\circ d\varphi_P$.
         \item If $\varphi$ is birational, and $\varphi^{-1}$ is regular at $\varphi(P)$, $d\varphi_P$ is an iso.
     \end{enumerate}
 \end{prop}
 \begin{proof}
     (i) By defn, $d\varphi_P(v)\in T_{Y,\varphi(P)}$ iff $\sum_j\sum_iv_i\frac{\partial f_j}{\partial x_i}(P)\frac{\partial g}{\partial y_j}(P)=0$ for all $g\in I(Y)$. Consider the pullback on function fields. Define $h=g(f_1,...,f_m)\in I(X)$. Since $(v_1,...,v_n)\in T_{X,P}$, we have $\sum_{i}\frac{\partial h}{\partial x_i}(P)=0$. The result then follows from chain rule.

     (ii) linear by defn. Suppose $\varphi=(f_1,...,f_m)=(f_1',...,f_m')$, then $f_j-f_j'=p_j/q_j$ where $p_j\in I(X)$ and $q_j(P)\neq 0$, \[\frac{\partial (f_j-f_j')}{\partial x_i}=\frac{1}{q}\frac{\partial p_j}{\partial x_i}\]
    For $v\in T_{X,P}$, $\sum_iv_i\frac{\partial(f_j-f_j')}{\partial x_i}=0$ for each $j$.

    (iii) Chain rule;
    (iv) follows from (iii).
 \end{proof}
\begin{defn}
    Let $X$ be affine or proj. variety. \begin{enumerate}[(i)]
        \item If $X$ is irreducible, then define $\dim X=\min_{\{P\in X\}}\dim T_{X,P}$.
        \item If $X$ is irreducible, then say $P\in X$ is non-singular (or smooth) if $\dim T_{X,P}=\dim X$.
        \item If $X$ is reducible, define $\dim X$ to be the maximal dimension of its irreducible components.
        \item If $X$ is reducible and $P\in X$ lies on a single irreducible component $X_i$, then $P$ is nonsingular iff it is nonsingular in $X_i$. If $P\in X_i\cap X_j$ for distinct irreducible components, then $P$ is singular.
        \item $X$ is smooth if $X$ has no singular points.
    \end{enumerate}
\end{defn}
\[(\exists-:\tag{Owen's Signature}\]

\textit{Rational maps, function fields, local rings, tangent spaces for proj. varieties require irreducibility.}

[$X=Z(xy)$ at $0$ shows that we do require irreducibility to have a well-defined tangent space.]

If $X=Z(f)\subseteq\bA^2$ and $f$ has not linear terms and $0\in Z(f)$, then $Z(f)$ is singular at $0$, e.g. , the nodal cubic curve $Z(y^2-x^2(x+1))$ and the cuspidal cubic curve $Z(y^2-x^3)$.
\begin{rem}
    These curves are not isomorphic, but the tangent spaces don't distinguish them. We need to consider $\mathfrak m/\mathfrak m^2,\ \mathfrak m^2/\mathfrak m^3,\ \ldots$.
\end{rem}
\begin{thm}
    Let $X$ be an algebraic variety. Then the set of smooth points of $x$ is open dense in $X$.
\end{thm}
\begin{proof}
    Since the intersection set is proper closed in $X$, assume wlog $X$ is irreducible. Also assume $X$ is affine (restrict to a patch if necessary). Say $I(X)=(f_1,...,f_r)$. If $P\in X$, then $T_{X,P}$ is the zero locus of all linearizations about $P$, $\dim T_{X,P}=n-\operatorname{rank}(\partial_if_j)$. $\{P\in X:\operatorname{rank}(\partial_if_j)\le n-r\}$  is computed by $(n-r)\times(n-r)$ minors of the matrix $(\partial_if_j)$ which cannot all be in $I(X)$.
\end{proof}
\begin{crly}
    If $X,Y$ are birational varieties, then $\dim X=\dim Y$.
\end{crly}
\begin{proof}
    Restrict the birational equivalence $\varphi:X\dashto Y$ to the smooth locus.
\end{proof}

\begin{defn}
    Let $L/K$ be a field extension. We say that $x_1,...,x_n\in L$ are algebraically independent over $K$ if there is no non-trivial polynomial $p\in k[t_1,...,t_n]$ s.t. $p(x_1,...,x_n)=0$.
\end{defn}
\begin{example}
    $k(\bA^n)$ has $n$ alg indep elements.\\
    $k(Z(y^2-x(x+1)(x-1)))\cong \text{f.f. of }k[x,y]/(y^2-x(x^2-1))$. Have $x,y$ alg indep, so $\{x\}$ is alg ind set and $\{y\}$ is too, but $\{x,y\}$ is not.
\end{example}
In general if $L/K$ is f.g., generated by $x_1,...,x_m$, there exists a maximal algebraically independent subset of $\{x_1,...,x_m\}$. Wlog, assume $\{x_1,...,x_k\}$ is such a set. So $K\subseteq K(x_1,...,x_k)\subseteq L$. $K(x_1,...,x_k)/K$ is purely transcendental; $L/K(x_1,...,x_k)$ is algebraic. By primitive element theorem, can write $L=K(x_1,...,x_k)(y)$ for some $y\in L$.
\begin{defn}
    Any set $\{x_1,...,x_r\}\subseteq L$ which generate a pure transcendental extension $K(x_1,...,x_r)$ s.t. $L/K_0$ is finite is called a transcendence basis for $L/K$.
\end{defn}
\begin{defn}
    The transcendence degree of a f.g. field extension $L/K$ is the size of any transcendence basis.
\end{defn}
\begin{prop}
    Let $K=k(x_1,...,x_n)$ with $\{x_1,....,x_n\}$ alg indep over $k$, and $L/K$ a field extension. If $x_{n+1}\in L$ is algebraic over $K$, then $I=\{g\in k[t_1,...,t_{n},t]:g(x_1,...,x_{n+1})=0\}$ is a principal ideal generated by an irreducible $f\in k[t_1,...,t_{n+1}]$. If $f$ contains $t_i$, then $\{x_1,...,x_{i-1},x_{i+1},...,x_{n+1}\}$ is an alg indep set over $k$.
\end{prop}
\begin{proof}
    Note that $k[t_1,...,t_n]\subset K$ is suitable for Gauss lemma, and $K[t]$ is a PID. $I$ has a generator in $K[t]$. By Gauss, irred generator.
    If removing $x_i$ gives an alg dep set, then can find $g\in I$ which doesn't include $t_i$...
\end{proof}
\begin{crly}
    Transcendence degree is well-defined
\end{crly}
\begin{proof}
    NOtes on moodle
\end{proof}
\begin{lem}[Reduction to hypersurface]
    $X$ irred alg variety. Then $X$ is birational to a hypersurface.
\end{lem}
\begin{proof}
    Find $K_0=k(x_1,...,x_n)$ purely transcendental with $k(X)/K_0$ finite. Write $k(X)=K_0(y)$. The previous proposition says we have irred $f\in k[x_1,...,x_n][y]$ s.t. $k[x_1,...,x_n,y]\cong k[x_1,...,x_n,y]/(f)$, which is the coord ring of a hypersurface. By correspondence, $X$ is birational to hypersurface.
\end{proof}
\begin{crly}
    For any irred alg variety $X$, $\dim X$ is the transcendence degree of the function field $k(X)$. Notation: $\operatorname{trdeg}_kk(X)$.
\end{crly}
\begin{proof}
    By reduction lemma, suffices to consider hypersurfaces. If $P\in X$, then $T_{X,P}$ has dimension $n$ or $n-1$. On a Zariski open subset this dim is $n-1$. We have $k(X)=$ f.f. of $k[x_1,...,x_n]/(f)$ for some irred non const $f$ which has transcendence degree $n-1$, since $f$ is nonconst.
\end{proof}

\section{Structure of Algebraic Curves}
\begin{defn}
    A curve is a smooth projective, irreducible variety of dimension 1.
\end{defn}
(unless qualified by singular/affine/reducible)
\begin{example}
    Hypersurfaces in $\PP^2$, $Z(f)$ for $f$ homogeneous non=const deg $d$ polys in three variables. $f$ is specified by $\binom{d+2}{2}$ coeffs. Using this, can make the following identification:
    \[\{\deg\ d\text{ hypersurfaces in }\PP^2\}\leftrightarrow \PP^{\binom{d+2}{2}-1}\]
    Reducibility of $Z(f)$ is a Zariski closed condition in $\PP^{\binom{d+2}{2}-1}$. Note that $(x^d+y^d+z^d)$ is irreducible for every degree (Gauss). Get an open dense set in $\PP^{\binom{d+2}{2}-1}$ corresponds to irred hypersurfaces. In $\PP^{\binom{d+2}{2}-1}\times\PP^2$ there is a closed subvariety defined by $f(P)=0$. Vanishing of $\partial_xf,\partial_yf,\partial_zf$ are closed conditions since all curves contain smooth points, there is a Zariski closed proper subset in $\PP^{\binom{d+2}{2}-1}\times\PP^2$ which contains all pairs $(f,P)$ which have $f(P)=0$ but $f$ is reducible or $P$ is singular for $Z(f)$. A generic hypersurface in $\PP^2$ is a curve, e.g., $Z(x^d+y^d+z^d)$ is a curve in $\PP^2$.
\end{example}
\begin{rem}
    (Euler's homogeneous identity) If $f$ is homogeneous of deg $d$ in $n$ variables, then $F(x_1,....,x_n)\deg F=\sum_{i=1}^nx_i\partial_{x_i}F(x_1,...,x_n)$. This is an identity of polys. (Suffices to check monomials)
\end{rem}
\begin{prop}
    Let $C$ be a curve, $D\subseteq C$ a proper closed subvariety. Then $D$ is a finite union of points.
\end{prop}
\begin{proof}
    Wlog, $C$ is affine, $D$ is irreducible. Have $I(C)\subsetneq I(D)$. So the inclusion induces a surjective hom $\varphi^\ast:A(C)\to A(D)$. If $D$ is not a point, then Nullstellensatz implies $A(D)\supsetneq k$. $k$ is alg closed, so $A(D)$ contains a transcendental element (over $k$). Clear denominators and call the resulting elt $t$. There exists $x,y\in A(C)$ s.t. $\varphi^\ast(x)=1$ and $\varphi^\ast(y)=t$, so $x,y$ are algebraically indep in $A(C)$ and hence in $k(C)$. Contradiction as $\dim C=1$.
\end{proof}
\begin{thm}
    If $P\in C$ is a smooth point of a irred proj. dim $1$ (not necessarily smooth) variety, then the ideal $\mathfrak m_P\trianglelefteq \mathcal O_P$ is a principal ideal.
\end{thm}
\begin{lem}[Nakayama's lemma]
    Let $R$ be a ring, $M$ a f.g. $R$-module. Let $J\trianglelefteq R$ be an ideal. \begin{enumerate}[(i)]
        \item If $JM=M$, then $\exists r\in J$ s.t. $(1+r)M=0$.
        \item If $N\subseteq M$ is a submodule s.t. $JM+N=M$, then $\exists r\in J$ s.t. $(1+r)M\subseteq N$.
    \end{enumerate}
\end{lem}
\begin{proof}
    (i): Write $M=y_1R_1+\cdots+y_nR$, $y_i\in M=JM$. Write $y_i=\sum_jx_{ij}y_j$, $x_{ij}\in J$. Consider the matrix $X=(x_{ij})$ so that $(I-X)y_i=0$ for all $i$. Multiply by adjugate, get $\det(I-X)y_i=0$ for all $i$. Note that $\det(I-X)=1+r$ for some $r\in J$.

    (ii): Apply (i) to $M/N$ and use the correspondence of submodules.
\end{proof}
\begin{proof}[Proof of thm]
    Can change coord, so wlog assume $P=0$ and $T_{C,P}=\{x_2=\cdots=x_n=0\}$. Can also assume $C$ is affine. So there exists polys $f_2,...,f_n\in I(C)$ with $f_j=x_j+h_j$, where temr of $h_j$ all have deg $\ge 2$, so in $\mathcal O_P$ we have $x_j=h_j\in\mathfrak m_P^2$. So $\mathfrak m_P=x_1\mathcal O_P+\mathfrak m_P^2$. Apply Nakayama with $N=x_1\mathcal O_P\subseteq M=\mathfrak m_P=J\subseteq R=\mathcal O_P$. There exists $r\in\mathfrak m_P$ s.t. $(1+R)M\subseteq N$. Since $r\in\mathfrak m_P$, $1+r$ is a unit, so $M\subseteq N$, i.e., $\mathfrak m_P=x_1\mathcal O_P$.
\end{proof}
\begin{crly}
    Let $C$ is an affine plane curve (possibly singular) $Z(f)\subseteq\bA^2$. Let $P\in C$ be a smooth point. Then the function $C\to k$, $Q\mapsto x(Q)-x(P)$ is a local coordinate at $P$ if $\partial_yf(P)\neq0$.
\end{crly}
\begin{proof}
    Wlog by translation, assume $P=(0,0)$ with tangent space $\{aX+bY=0\}$. THe proof of previous thm shows that $Y\in X\mathcal O_p+\mathfrak m_P^2$ precisely when $\partial_yf(P)\neq0$ so in this case $X$ is a local coord at $P$.
\end{proof}
\end{document}